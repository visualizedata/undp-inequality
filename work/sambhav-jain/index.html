<!DOCTYPE html>
<html>
    <head>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <!--<script src="d3CheckBox.js"></script>-->
        </head>
        <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
        <!--<link href="https://fonts.googleapis.com/css?family=Roboto:100,300" rel="stylesheet">-->
        <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700,900" rel="stylesheet">
        <style type="text/css">
            
            
            #regions {
                background-color: black;
                border: 1px solid #26bde2;
                color: #26bde2;
                padding: 5px 20px 5px 20px;
                text-align: center;
                text-decoration: none;
                display: block;
                font-size: 10px;
                /*margin: 0px 0px 0px 50px;*/
                /*position: absolute;*/
                cursor: pointer;   
            }
            
            body {
                background-color: white;
                font-size: 2vh;
            }
            
            #filter{
                float: right;
                margin-right: 50;
                padding-right: 10%;
            }
            
           div.tooltip {	
                position: absolute;
                text-align: left;			
                width: 150px;					
                height: auto;					
                padding: 10px;				
                font: 12px sans-serif;		
                background: white;	
                border-width: 2px;		
                border-radius: 2px;
                box-shadow: 0px 0px 10px #888888;
                border-style: solid;
                border-color: white transparent transparent transparent;
                }
            
            
            #canvas {	
                
                margin-top: 40px;
                }    
            
            .button {
                background-color: #00689d; /* Green */
                border: 0px;
                border-radius: 5px;
                color: white;
                padding: 5px 8px 5px 8px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 10px;
                /*position: absolute;*/
                cursor: pointer;
                }
                
            /*.regionButton {*/
                /*background-color: black;*/
            /*    border: 1px solid #26bde2;*/
            /*    color: #26bde2;*/
            /*    margin-left: 10px;*/
            /*    padding: 10px 12px 10px 12px;*/
            /*    text-align: center;*/
            /*    text-decoration: none;*/
            /*    display: inline-block;*/
            /*    font-size: 10px;*/
                /*position: absolute;*/
            /*    cursor: pointer;*/
            /*    } */
            
            #north{
                background-color: white; /* Green */
                border: 1px solid #e5243b;
                border-color: #e5243b ;
                border-radius: 5px;
                color: #e5243b;
                font-weight: 700;
                margin-left: 10px;
                margin-right: 4%;
                padding: 5px 8px 5px 8px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 1.5vh;
                /*position: absolute;*/
                cursor: pointer;
                }
            #south{
                background-color: white; /* Green */
                border: 1px solid #bf8b2e;
                border-radius: 5px;
                color: #bf8b2e;
                margin-left: 10px;
                padding: 5px 8px 5px 8px;
                text-align: center;
                font-weight: 700;
                text-decoration: none;
                display: inline-block;
                font-size: 1.5vh;
                /*position: absolute;*/
                cursor: pointer;
                }
            #center{
                background-color: white; /* Green */
                border: 1px solid #4c9f38;
                border-radius: 5px;
                color: #4c9f38;
                font-weight: 700;
                margin-left: 10px;
                padding: 5px 8px 5px 8px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 1.5vh;
                /*position: absolute;*/
                cursor: pointer;
                }  
            #east{
                background-color: white; /* Green */
                border: 1px solid #26bde2;
                border-radius: 5px;
                color: #26bde2;
                margin-left: 10px;
                padding: 5px 8px 5px 8px;
                text-align: center;
                font-weight: 700;
                text-decoration: none;
                display: inline-block;
                font-size: 1.5vh;
                /*position: absolute;*/
                cursor: pointer;
                }
            #west{
                background-color: white; /* Green */
                border: 1px solid #fd6925;
                border-radius: 5px;
                color: #fd6925;
                margin-left: 10px;
                font-weight: 700;
                padding: 5px 8px 5px 8px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 1.5vh;
                /*position: absolute;*/
                cursor: pointer;
                }    
            
            
            
            
            #topdiv {
                background-color: white;
                padding: 15px 0px 0px 0px;
            }    
            
           
            
            #begin{
                padding: 0px 0px 0px 50px;
                font-size: 1.5vh;
            
            }
            
            #beginNext{
                padding: 5px 8px 5px 10px;
                margin-left: 10px;
                font-size: 1.5vh;
            }
            
            #option{
                margin-left: -30px;
                text-align: center;
                background-color: black;
                padding: 0 0 50px 0;
            }    
            
            .row div{
			border: 1px solid; 
		        }
            
            #myModal{
    			display: none;
    			position: fixed;
    			top: 100px;
    			left: 5%;
    			/*padding: 20px;*/
    			box-shadow: 0 0 10px;
    			background-color: white;
    			opacity: 0.95;
    			z-index: 99;
    	       	}
    		
    		.btn{
    			/*border: 1px solid;*/
    			cursor: pointer;
    			float: right;
    			padding: 5px 5px 0px 0px;
    		    }    
                
            .desc {
                font-family: 'Roboto', sans-serif;
                font-weight: 300;
                font-size: 12px;
                color: LightGrey;
                margin-left: 50px;
                }
            
            #country {
                font-family: 'Roboto', sans-serif;
                font-weight: 300;
                font-size: 18px;
                color: black;
                text-align: center;
                margin:0;
                padding: 15px 0px 10px 0px;
                /*margin-left: 50px;*/
                }    
            
            .graphTitle {
                font-family: 'Roboto', sans-serif;
                font-weight: bolder;
                font-size: 12px;
                color: black;
                text-align: center;
            }
            
            .nodata{
                font-family: 'Roboto', sans-serif;
                /*font-weight: 300;*/
                font-size: 18px;
                /*color: green;*/
                text-align: center;    
            }
            
            .label {
                font-family: 'Roboto', sans-serif;
                font-weight: 600;
                font-size: 80%;
                color: gray;
            }
            
            .label2 {
                font-family: 'Roboto', sans-serif;
                font-weight: 300;
                font-size: 80%;
                color: gray;
            }
            
            #expand{
                opacity: 0.7;
            }
           
            
            h1 {
                font-size: 250%;
                font-family: 'Roboto', sans-serif;
                font-weight: 700;
                /*color: #00689d;*/
                color: #212121;
                margin-bottom: 0px;
                /*font-weight: bolder;*/
                /*margin-left: 50px;*/
                text-align: center;
                }
            
            .subTitle {
                font-family: 'Roboto', sans-serif;
                font-weight: 700;
                /*font-size: 16px;*/
                color: gray;
                text-align: center;
                /*margin-left: 50px;*/
                
                }    
            
            
            h4 {
                margin-bottom: 0px;
                color: #2a2a2a;
                }    
                
            .img {
              
              width:450px;
              height:auto;
              float: right;
              padding: 40px 10% 0px 20px;
              opacity: 0.8;
            } 
            
            #bottomLine { 
                display: block;
                margin-top: 0.5em;
                margin-bottom: 0.5em;
                margin-left: auto;
                margin-right: auto;
                border-style: inset;
                border-width: 1px;
                opacity: 0.5;
            }
            
            #topLine{
                opacity: 0;
            }
            
            #svgdiv{
                background-color: white;
            }
            
            .button1{
                background-color: white; /* Green */
                border: 0px;
                font-weight: 700;
                color: black;
                padding: 5px 0px 0px 0px;
                text-align: left;
                text-decoration: none;
                display: inline-block;
                font-size: 2vh;
                /*position: absolute;*/
                cursor: pointer;
            }
            
            .overlay {
                background-color: #000;
                bottom: 0;
                display: none;
                left: 0;
                opacity: 0.7;
                filter: alpha(opacity = 50); /* IE7 & 8 */
                position: fixed;
                right: 0;
                top: 0;
                z-index: 98;
            }
            
        </style>
        <body>
            <div id="topdiv">
                <div>
                    <input class="button1"
                           id="begin"
                           name="start" 
                           type="button" 
                           value="START HERE:" 
                           onclick="begin()" />
                           
                    <input class="button"
                           id="beginNext"
                           name="start" 
                           type="button" 
                           value="PRIMARY" 
                           onclick="begin()" />
                    
                    <input class="button"
                           id="beginNext"
                           name="start" 
                           type="button" 
                           value="SECONDARY" 
                           onclick="begin2()" />
                           
                    <input class="button"
                           id="beginNext"
                           name="start" 
                           type="button" 
                           value="TERTIARY" 
                           onclick="begin3()" />
                    
                    <input class="button"
                           id="beginNext"
                           name="start" 
                           type="button" 
                           value="ALL LEVELS" 
                           onclick="begin4()" />
                   
                    
                    <input style="float: right;"
                           class="regionButton"
                           id="north"
                           name="start" 
                           type="button" 
                           value="NORTHERN" />
                           <!--onclick="visualChange('north')" />-->
                    
                    <input class="regionButton"
                           style="float: right;"    
                           id="south"
                           name="start" 
                           type="button" 
                           value="SOUTHERN" />
                           <!--onclick="visualChange('south')" />-->
                    
                    <input class="regionButton"
                           style="float: right;"    
                           id="center"
                           name="start" 
                           type="button" 
                           value="CENTRAL" />
                           <!--onclick="visualChange('center')" />-->
                    
                    <input class="regionButton"
                           style="float: right;"    
                           id="east"
                           name="start" 
                           type="button" 
                           value="EASTERN" /> 
                           <!--onclick="visualChange('east')" />-->
                    
                    <input class="regionButton"
                           style="float: right;"    
                           id="west"
                           name="start" 
                           type="button" 
                           value="WESTERN" />
                           <!--onclick="visualChange('west')" /> -->
                           
                </div> 
            </div> 
        <hr>    
        <h1>THE  AFRICAN  EDUCATION  FUNNEL</h1>    

        <div id = "about">
            <h4 class="subTitle">A Comparison of <a href='http://data.uis.unesco.org/?queryid=142'>Enrollment Rates</a> Across Different Levels of Education, and its Relationship to <a href="https://www.wider.unu.edu/project/wiid-world-income-inequality-database">Inequality</a></h4>
        </div>
        <!--<hr>-->
        </div>
        <div id='myModal'>
            <div>
                <img src="cross.png" class='btn close' style="width:15px;height:15px;">
                <p id="country"></p>
            </div>
            
          	<svg id="graph1"></svg>
          	<svg id="graph2"></svg>          	
          	<svg id="graph3"></svg>
          	<svg id="graph4"></svg>
          	<!--<svg id="graph5"></svg>-->
        </div>
        
        <div id="svgdiv">
        <svg id = "canvas"></svg>    
        </div>
       
        
        <!--<div id="option" style="height: 20px">-->
        <!--    <input class="button"-->
        <!--           id="expand"-->
        <!--           name="updateButton" -->
        <!--           type="button" -->
        <!--           value="expand tertiary scale" -->
        <!--           onclick="expand()" />-->
        <!--</div>-->
        
        <!--<div id = "dataSource">-->
        <!--        <br><br>-->
        <!--        <img class="img" src="key.png">-->
        <!--        <h4 id="dataSource">Data Sources & Methodology:</h4>-->
        <!--        <p class="desc">Over the past decade, the primary school enrollment rate in <br>in sub-Saharan Africa  has significantly improved , now averaging over 80%.</p>-->
        <!--        <p class="desc">However, the poor secondary and tertiary enrollment rates are considerably restricting <br>the region from moving it's economy toward higher-productivity sectors.</p>-->
        <!--        <p class="desc">This visualization is an attempt to establish this gap in the different levels of education. <br>The enrollment rates displayed below are averaged over the ten year peiod, from 2004 to 2014.</p>-->
        <!--        <p class="desc">The visualization further explores the change in enrollment rates over time, and compares it <br> with the change in the GINI coefficient over the same time period.</p>-->
        <!--</div>-->
        
        <script>
        
            // setting margin
            var margin = {top: 30, right: 0, bottom: 60, left: 20},
            width = window.innerWidth - margin.left - margin.right,
            height = window.innerHeight - 100 - margin.bottom;
            
            var northCheck;
            var southCheck;
            var eastCheck;
            var westCheck;
            var centerCheck;
            
            // var regions = ["All countries", "Eastern Africa", "Western Africa", "Middle Africa", "Southern Africa", "Northern Africa"];

            // var sel2 = d3.select("#filter")
            //             .append("select")
            //             .attr('id', 'regions')
            //             .selectAll("option")
            //             .data(regions)
            //             .enter()
            //             .append("option")
            //             .text(function(d) {return d;});    
            
            var canvas = d3.select("#canvas")
                            .attr("width", width)
                            .attr("height", height);
            
            createAxes();
            
            var filtData = [];
            function firstVisual(){
                
                d3.selectAll(".funnelGroupWest").remove();
                d3.selectAll(".funnelGroupNorth").remove();
                d3.selectAll(".funnelGroupSouth").remove();
                d3.selectAll(".funnelGroupEast").remove();
                d3.selectAll(".funnelGroupCenter").remove();
                d3.selectAll(".textbox").remove();
                d3.selectAll(".textboxNo").remove();
                d3.selectAll(".funnelGroup3").remove();
                d3.selectAll(".funnelGroup4").remove();
                d3.selectAll(".funnelGroup5").remove();
                
                
                d3.csv("quantData2.csv", function(error, data) {
                if (error) throw error;
                console.log(data);

                    var funnelGroup2 = canvas.selectAll('.funnelGroup2')
                                        .data(data)
                                        .enter()
                                        .append('g'); 
                
                  
                    var primary1 = funnelGroup2
                                    .append("circle")
                                    .attr("class", "funnelGroup2")
                                    .attr('cx', function(d, i) { return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20;})
                                    .attr('cy', 20 + 50)
                                    .attr('r', 6)
                                    .attr('fill', '#00689d')
                                    .attr('fill-opacity', 0.3);
                                    
                    var primary2 = funnelGroup2
                                    .append("circle")
                                    .attr("class", "funnelGroup2")
                                    .attr('cx', function(d, i) { return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20;})
                                    .attr('cy', 20 + 50)
                                    .attr('r', 6)
                                    .attr('fill', '#00689d')
                                    .attr('fill-opacity', 0.3);    
                                    
                    var check = funnelGroup2
                                    .append("rect")
                                    .attr("class", "funnelGroup2")
                                    .attr('x', function(d, i) { return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20;})
                                    .attr('y', 19 + 50)
                                    .attr('width', function(d, i) { return (width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20 - (width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20));})
                                    .attr('height', 2)
                                    .style("fill", "black")
                                    .attr('fill-opacity', 0);                
                  
                    var secondary1 = funnelGroup2
                                    .append("circle")
                                    .attr("class", "funnelGroup2")
                                    .attr('cx', function(d, i) { return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20;})
                                    .attr('cy', function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                                    .attr('r', 6)
                                    .attr('fill', '#00689d')
                                    .attr('fill-opacity', 0.3); 
                    var secondary2 = funnelGroup2
                                    .append("circle")
                                    .attr("class", "funnelGroup2")
                                    .attr('cx', function(d, i) { return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20;})
                                    .attr('cy', function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                                    .attr('r', 6)
                                    .attr('fill', '#00689d')
                                    .attr('fill-opacity', 0.3);
                                    
                    var primSec1 = funnelGroup2
                                    .append("line")
                                    .attr("class", "funnelGroup2")
                                    .attr("x1", function(d, i) { return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20 ;})
                                    .attr("y1", function(d, i) { if(d['enrolSecondary'] !== ""){return 20 + 50;}else{return 10000;}})
                                    .attr("x2", function(d, i) { return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20 ;})
                                    .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                                    .attr("stroke-width", 2)
                                    .attr("stroke-opacity", 0.2)
                                    .attr("stroke", "lightGray");
                                    
                    var primSec2 = funnelGroup2
                                    .append("line")
                                    .attr("class", "funnelGroup2")
                                    .attr("x1", function(d, i) {return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20; })
                                    .attr("y1", function(d, i) { if(d['enrolSecondary'] !== ""){return 20 + 50;}else{return 10000;}})
                                    .attr("x2", function(d, i) {return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2  + 20;})
                                    .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                                    .attr("stroke-width", 2)
                                    .attr("stroke-opacity", 0.2)
                                    .attr("stroke", "lightGray");

                    var tertiary1 = funnelGroup2
                                    .append("circle")
                                    .attr("class", "funnelGroup2")
                                    .attr('cx', function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX3(d['enrolTertiary']))/2 - 20;}})
                                    .attr('cy', function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40 - 30;}else{return 10000;}})
                                    .attr('r', 6)
                                    .attr('fill', '#00689d')
                                    .attr('fill-opacity', 0.3);
                    var tertiary2 = funnelGroup2
                                    .append("circle")
                                    .attr("class", "funnelGroup2")
                                    .attr('cx', function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 - parseFloat(mapX3(d['enrolTertiary']))/2 + 20;}})
                                    .attr('cy', function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40 - 30;}else{return 10000;}})
                                    .attr('r', 6)
                                    .attr('fill', '#00689d')
                                    .attr('fill-opacity', 0.3);                
                                  
                    var secTer1 = funnelGroup2
                                    .append("line")
                                    .attr("class", "funnelGroup2")
                                    .attr("x1", function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20; }})
                                    .attr("y1", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                                    .attr("x2", function(d, i) {if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX3(d['enrolTertiary']))/2 - 20;} })
                                    .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40 - 30;}else{return 10000;}})
                                    .attr("stroke-width", 2)
                                    .attr("stroke-opacity", 0.2)
                                    .attr("stroke", "lightGray");
                                    
                                    
                    var secTer2 = funnelGroup2
                                    .append("line")
                                    .attr("class", "funnelGroup2")
                                    .attr("x1", function(d, i) { if(d['enrolTertiary'] !== ""){ return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20; }})
                                    .attr("y1", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                                    .attr("x2", function(d, i) { if(d['enrolTertiary'] !== ""){ return width/2 - parseFloat(mapX3(d['enrolTertiary']))/2 + 20;} })
                                    .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40 - 30;}else{return 10000;}})
                                    .attr("stroke-width", 2)
                                    .attr("stroke-opacity", 0.2)
                                    .attr("stroke", "lightGray");
                    
                    var tooltip =  funnelGroup2 
                                    .on("click", function(d) { 
                                        
                                $("#graph1").empty();
                                $("#graph2").empty();
                                $("#graph3").empty();
                                $("#graph4").empty();
                                // $("#graph5").empty();
  
                                var ttwidth = width - 100;
                                var graphWidth = ttwidth/4;
                                                    
                                d3.select("#country")
                                        .attr("x", (ttwidth)/2)
                                        .attr("y", 5)
                                        .text(d['country'] + ": How does education enrollment compare to inequality?");
                                        
                                var mapygraph1 = d3.scaleLinear().domain([0, 100]).range([7*(graphWidth/8), graphWidth/8]);
                                var mapygraph2 = d3.scaleLinear().domain([0, 100]).range([7*(graphWidth/8), graphWidth/8]);   
                                var mapygrpah3 = d3.scaleLinear().domain([0, 100]).range([7*(graphWidth/8), graphWidth/8]); 
                                var mapygraph4 = d3.scaleLinear().domain([25, 75]).range([7*(graphWidth/8), graphWidth/8]);
                                
                                for(var i = 1; i<=4; i++)
                                {
                                    var id = "#graph" + i;
                                    
                                d3.select(id)
                                        .attr("width", graphWidth)
                                        .attr("height", graphWidth);
                                
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8)
                                        .attr("y1", graphWidth/8)
                                        .attr("x2", (graphWidth/8)*7)
                                        .attr("y2", graphWidth/8)
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8 )
                                        .attr("y1", graphWidth/8 + 2*(graphWidth/8))
                                        .attr("x2", (graphWidth/8)*7)
                                        .attr("y2", graphWidth/8 + 2*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8)
                                        .attr("y1", graphWidth/8 + 4*(graphWidth/8))
                                        .attr("x2", (graphWidth/8)*7)
                                        .attr("y2", graphWidth/8 + 4*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8)
                                        .attr("y1", graphWidth/8 + 6*(graphWidth/8))
                                        .attr("x2", (graphWidth/8)*7)
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);    
                                       
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8)
                                        .attr("y1", graphWidth/8)
                                        .attr("x2", graphWidth/8)
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8 + 2*(graphWidth/8))
                                        .attr("y1", graphWidth/8 )
                                        .attr("x2", (graphWidth/8) + 2*(graphWidth/8))
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8 + 4*(graphWidth/8))
                                        .attr("y1", graphWidth/8)
                                        .attr("x2", graphWidth/8 + 4*(graphWidth/8))
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8 + 6*(graphWidth/8))
                                        .attr("y1", graphWidth/8)
                                        .attr("x2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);  
                                
                                d3.select(id)
                                        .append("text")
                                        .attr("class", "label")
                                        .attr("x", graphWidth/8)
                                        .attr("y", 7*(graphWidth/8) + 15)
                                        .text("'90-'95")
                                        .attr("text-anchor", "middle");
                                d3.select(id)
                                        .append("text")
                                        .attr("class", "label")
                                        .attr("x", 7*(graphWidth/8))
                                        .attr("y", 7*(graphWidth/8) + 15)
                                        .text("'06-'10")
                                        .attr("text-anchor", "middle");      
                                }
                                
                                    
                                d3.select("#graph1")
                                        .append("text")
                                        .attr("class", "graphTitle")
                                        .attr("x", graphWidth/2)
                                        .attr("y", 20)
                                        .text("primary enrollment rate")
                                        .attr("text-anchor", "middle");
                                
                                d3.select("#graph2")
                                        .append("text")
                                        .attr("class", "graphTitle")
                                        .attr("x", graphWidth/2)
                                        .attr("y", 20)
                                        .text("secondary enrollment rate")
                                        .attr("text-anchor", "middle");
                                d3.select("#graph3")
                                        .append("text")
                                        .attr("class", "graphTitle")
                                        .attr("x", graphWidth/2)
                                        .attr("y", 20)
                                        .text("tertiary enrollment rate")
                                        .attr("text-anchor", "middle"); 
                                d3.select("#graph4")
                                        .append("text")
                                        .attr("class", "graphTitle")
                                        .attr("x", graphWidth/2)
                                        .attr("y", 20)
                                        .text("inequality (GINI)")
                                        .attr("text-anchor", "middle"); 
                                // d3.select("#graph5")
                                //         .append("text")
                                //         .attr("class", "graphTitle")
                                //         .attr("x", graphWidth/2)
                                //         .attr("y", 20)
                                //         .text("poverty")
                                //         .attr("text-anchor", "middle"); 
                        
                        if(d['pri9195'] == "" && d['pri0610'] == ""){
                            
                            d3.select("#graph1")
                                        .append("text")
                                        .attr("class", "nodata")
                                        .text("No Data")
                                        .attr('x', graphWidth/2)
                                        .attr('y', graphWidth/2 + 5)
                                        .style("fill", "LightGrey")
                                        .attr("text-anchor", "middle");    
                        }
                        
                        if(d['sec9195'] == "" && d['sec0610'] == ""){
                             d3.select("#graph2")
                                        .append("text")
                                        .attr("class", "nodata")
                                        .text("No Data")
                                        .attr('x', graphWidth/2)
                                        .attr('y', graphWidth/2 + 5)
                                        .style("fill", "LightGrey")
                                        .attr("text-anchor", "middle");   
                        }
                        
                        if(d['ter9195'] == "" && d['ter0610'] == ""){
                             d3.select("#graph3")
                                        .append("text")
                                        .attr("class", "nodata")
                                        .text("No Data")
                                        .attr('x', graphWidth/2)
                                        .attr('y', graphWidth/2 + 5)
                                        .style("fill", "LightGrey")
                                        .attr("text-anchor", "middle");   
                        }
                        
                        if(d['gini9195'] == "" && d['gini0610'] == ""){
                             d3.select("#graph4")
                                        .append("text")
                                        .attr("class", "nodata")
                                        .text("No Data")
                                        .attr('x', graphWidth/2)
                                        .attr('y', graphWidth/2 + 5)
                                        .style("fill", "LightGrey")
                                        .attr("text-anchor", "middle");   
                        }
                        
                        if(d['pri9195'] !== "" && d['pri0610'] !== ""){  
                       
                        var line1 = d3.select("#graph1")
                                    .append("line")
                                    .attr("x1", graphWidth/8)
                                    .attr("y1", mapygraph1(d['pri9195']))
                                    .attr("x2", 7*(graphWidth/8))
                                    .attr("y2", mapygraph1(d['pri0610']))
                                    .attr('stroke', '#27bde2')
                                    .attr('stroke-width', 2);
                        }
                        
                        if(d['pri9195'] !== ""){
                        var circle1a = d3.select("#graph1")
                                        .append("circle")
                                        .attr("cx", graphWidth/8)
                                        .attr('cy', mapygraph1(d['pri9195']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text1a = d3.select("#graph1")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['pri9195'] + "%")
                                        .attr('x', graphWidth/8 - 15)
                                        .attr('y', mapygraph1(d['pri9195']) - 15);
                                        
                        }
                        
                        if(d['pri0610'] !== ""){
                        var circle1b = d3.select("#graph1")
                                        .append("circle")
                                        .attr("cx", 7*(graphWidth/8))
                                        .attr('cy', mapygraph1(d['pri0610']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                                        
                        var text1b = d3.select("#graph1")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['pri0610'] + "%")
                                        .attr('x', 7*(graphWidth/8) - 15)
                                        .attr('y', mapygraph1(d['pri0610']) - 15);
                                        
                        }            
                        
                        if(d['sec9195'] !== "" && d['sec0610'] !== ""){
                        var line2 = d3.select("#graph2")
                                    .append("line")
                                    .attr("x1", graphWidth/8)
                                    .attr("y1", mapygraph1(d['sec9195']))
                                    .attr("x2", 7*(graphWidth/8))
                                    .attr("y2", mapygraph1(d['sec0610']))
                                    .attr('stroke', '#27bde2')
                                    .attr('stroke-width', 2);            
                        }
                        
                        if(d['sec9195'] !== ""){
                        var circle2a = d3.select("#graph2")
                                        .append("circle")
                                        .attr("cx", graphWidth/8)
                                        .attr('cy', mapygraph1(d['sec9195']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text2a = d3.select("#graph2")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['sec9195'] + "%")
                                        .attr('x', (graphWidth/8) - 15)
                                        .attr('y', mapygraph1(d['sec9195']) - 15);                
                                        
                        }
                        
                        if(d['sec0610'] !== ""){
                        var circle2b = d3.select("#graph2")
                                        .append("circle")
                                        .attr("cx", 7*(graphWidth/8))
                                        .attr('cy', mapygraph1(d['sec0610']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text2b = d3.select("#graph2")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['sec0610'] + "%")
                                        .attr('x', 7*(graphWidth/8) - 15)
                                        .attr('y', mapygraph2(d['sec0610']) - 15);                   
                        }
                        
                        if(d['ter9195'] !== "" && d['ter0610'] !== ""){
                        var line3 = d3.select("#graph3")
                                    .append("line")
                                    .attr("x1", graphWidth/8)
                                    .attr("y1", mapygraph1(d['ter9195']))
                                    .attr("x2", 7*(graphWidth/8))
                                    .attr("y2", mapygraph1(d['ter0610']))
                                    .attr('stroke', '#27bde2')
                                    .attr('stroke-width', 2);
                        }
                        
                        if(d['ter9195'] !== ""){
                        var circle3a = d3.select("#graph3")
                                        .append("circle")
                                        .attr("cx", graphWidth/8)
                                        .attr('cy', mapygraph1(d['ter9195']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text3a = d3.select("#graph3")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['ter9195'] + "%")
                                        .attr('x', (graphWidth/8) - 15)
                                        .attr('y', mapygraph1(d['ter9195']) - 15);                     
                        
                                        
                        }
                        if(d['ter0610'] != ""){
                        var circle3b = d3.select("#graph3")
                                        .append("circle")
                                        .attr("cx", 7*(graphWidth/8))
                                        .attr('cy', mapygraph1(d['ter0610']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                         
                        var text3b = d3.select("#graph3")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['ter0610'] + "%")
                                        .attr('x', 7*(graphWidth/8) - 15)
                                        .attr('y', mapygraph1(d['ter0610']) - 15);                     
                        
                                        
                        }                
                                    
                        if(d['gini9195'] !== "" && d['gini0610'] !== ""){
                        var line3 = d3.select("#graph4")
                                    .append("line")
                                    .attr("x1", graphWidth/8)
                                    .attr("y1", mapygraph4(d['gini9195']))
                                    .attr("x2", 7*(graphWidth/8))
                                    .attr("y2", mapygraph4(d['gini0610']))
                                    .attr('stroke', '#fcc30b')
                                    .attr('stroke-width', 2);
                        }
                        
                        if(d['gini9195'] !== ""){
                        var circle4a = d3.select("#graph4")
                                        .append("circle")
                                        .attr("cx", graphWidth/8)
                                        .attr('cy', mapygraph4(d['gini9195']))
                                        .attr('r', 5)
                                        .attr('fill', '#fcc30b')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text4a = d3.select("#graph4")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['gini9195'] + "%")
                                        .attr('x', (graphWidth/8) - 15)
                                        .attr('y', mapygraph4(d['gini9195']) - 15);                   
                                        
                        }
                          
                        if(d['gini0610'] !== ""){                
                        var circle4b = d3.select("#graph4")
                                        .append("circle")
                                        .attr("cx", 7*(graphWidth/8))
                                        .attr('cy', mapygraph4(d['gini0610']))
                                        .attr('r', 5)
                                        .attr('fill', '#fcc30b')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2); 
                        var text4b = d3.select("#graph4")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['gini0610'] + "%")
                                        .attr('x', 7*(graphWidth/8) - 15)
                                        .attr('y', mapygraph4(d['gini0610']) - 15);
                                        
                                        
                        }        
                                $(".btn.close").on("click",function(){
			                    	$("#myModal").fadeOut();
			                    	$('.overlay').hide();
			                            })
                                        
                                $('body').append('<div class="overlay"></div>');
                                $('.overlay').show();
                                $("#myModal").fadeIn();
                                d3.selectAll(id).style('display', 'hidden');})
                                    
                                    .on("mouseover", function(d) 
                                        {
                                        d3.select(this).selectAll("circle").style("stroke", 'black').style("stroke-width", "2.5").style("fill-opacity", "1"); d3.select(this).selectAll("line").style("stroke", "black").style("stroke-width", "2").style("stroke-opacity", "1");
                                        d3.select(this).selectAll("rect").style("fill-opacity", "1");
                                        div.transition()		
                                            .duration(200)		
                                            .style("opacity", 1);
                                            
                                        var primColor, secColor, terColor;
                                    if(d['enrolPrimary'] >= 91.97){primColor = 'green';}else{ primColor = 'red'};
                                    if(d['enrolSecondary'] >= d['enrolSecondaryAvg']){secColor = 'green';}else{ secColor = 'red'};
                                    if(d['enrolTertiary'] >= 8.39){terColor = 'green';}else{ terColor = 'red'};
                                        
                                    div.html("<span style='font-size: 15px; text-align: left; text-transform: uppercase'>" + "<b>" + d['country'] + "</b> </span> <br>" 
                                                         // + "</span>" + "<br>" + "<span> <br> Primary:   </span>"+  "<b>"+ "<span style = 'color: " + primColor + "'>"  + d['enrolPrimary'] + "%" +  " </span> </b>"
                                                          + "<br>" + " Primary:  <b>" + "<span style='color: " + primColor + "'>" + d['enrolPrimary'] + "%" + "</span> </b>"
                                                          + "<br>" + " Secondary:  <b>" + "<span style='color: " + secColor + "'>" + d['enrolSecondary'] + "%" + "</span> </b>"
                                                          + "<br>" + " Tertiary: <b>" + "<span style='color: " + terColor + "'>" + d['enrolTertiary'] + "%" + "</span> </b>"
                                                          + "<br> <br>" + "<span style='color: green; font-size: 80%; text-transform: none;' >green</span><span style='font-size: 80%; text-transform: none';>: greater than Afr. avg.</span></b>"
                                                          + "<br>" + "<span style='color: red; font-size: 80%; text-transform: none;'>red</span><span style='font-size: 80%; text-transform: none';>: less than Afr. avg.</span></b>")	
                                        .style("left", (d3.event.pageX - 80) + "px")		
                                        .style("top", (d3.event.pageY - 170) + "px");
                                        })
                                    .on("mouseout", function() {
                                        d3.select(this).selectAll("circle").style("stroke", 'white').style("stroke-width", "0").style("fill-opacity", "0.3");
                                        d3.select(this).selectAll("line").style("stroke-width", "2").style("stroke-opacity", "0.2").style("stroke", "lightGray");
                                        d3.select(this).selectAll("rect").style("fill-opacity", "0");
                                        div.transition()		
                                            .duration(500)		
                                            .style("opacity", 0);	
                                    });
                
                
                
                d3.select("#north").on("click", function(){
                    if(northCheck == 1){
                        document.getElementById('north').style.background = "white";
                        document.getElementById('north').style.color = "#e5243b";
                        
                        d3.selectAll(".funnelGroupNorth").remove();
                        d3.selectAll(".Naverages").remove();
                        northCheck = 0;
                        
                        d3.select(this)
                        .style("fill", "white")
                    }else{
                        d3.selectAll('.funnelGroup2').remove();
                        document.getElementById('north').style.background = "#e5243b";
                        document.getElementById('north').style.color = "white";
                        
                    // primary
                    canvas
                        .append("line")
                        .attr('class', 'Naverages')
                        .attr('x1', width/2 - parseFloat(mapX1(94.56))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(94.56))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#e5243b")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Naverages')
                        .attr('x', width/2 - parseFloat(mapX1(94.56))/2 + 20)
                        .attr('y',  '4vh')
                        .text("P")
                        .attr('fill', "#e5243b")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Naverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(94.56))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(94.56))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#e5243b")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Naverages')
                        .attr('x', width/2 + parseFloat(mapX1(94.56))/2 - 20)
                        .attr('y',  '4vh')
                        .text("P")
                        .attr('fill', "#e5243b")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                    
                    // secondary
                     canvas
                        .append("line")
                        .attr('class', 'Naverages')
                        .attr('x1', width/2 - parseFloat(mapX1(74.54))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(74.54))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#e5243b")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Naverages')
                        .attr('x', width/2 - parseFloat(mapX1(74.54))/2 + 20)
                        .attr('y',  '4vh')
                        .text("S")
                        .attr('fill', "#e5243b")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Naverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(74.54))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(74.54))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#e5243b")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Naverages')
                        .attr('x', width/2 + parseFloat(mapX1(74.54))/2 - 20)
                        .attr('y',  '4vh')
                        .text("S")
                        .attr('fill', "#e5243b")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    // tertiary
                     canvas
                        .append("line")
                        .attr('class', 'Naverages')
                        .attr('x1', width/2 - parseFloat(mapX1(29.20))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(29.20))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#e5243b")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Naverages')
                        .attr('x', width/2 - parseFloat(mapX1(29.20))/2 + 20)
                        .attr('y',  '4vh')
                        .text("T")
                        .attr('fill', "#e5243b")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Naverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(29.20))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(29.20))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#e5243b")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Naverages')
                        .attr('x', width/2 + parseFloat(mapX1(29.20))/2 - 20)
                        .attr('y',  '4vh')
                        .text("T")
                        .attr('fill', "#e5243b")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');    
                        
                        // document.getElementById('north').style.border = "2px solid #5e5e5e";
                        //add data to filtdata here and run change visual along with color parameter and group class name
                        filtData = [];
                        for(var i = 0; i < data.length; i++){
                            if(data[i]['subRegion'] == 'Northern Africa'){
                                filtData.push(data[i]);
                            }
                        }
                    d3.select(this)
                    .style("fill", "#e5243b")
                    
                    visualChange(filtData, "#e5243b", "funnelGroupNorth")    
                    northCheck = 1;
                    
                    };
                })
                
                d3.select("#south").on("click", function(){
                    if(southCheck == 1){
                        document.getElementById('south').style.background = "white";
                        document.getElementById('south').style.color = "#bf8b2e";
                        // document.getElementById('south').style.border = "0px solid #333333";
                        d3.selectAll(".funnelGroupSouth").remove();
                        d3.selectAll(".Saverages").remove()
                        southCheck = 0;
                        
                    }else{
                        d3.selectAll('.funnelGroup2').remove();
                        document.getElementById('south').style.background = "#bf8b2e";
                        document.getElementById('south').style.color = "white";
                        
                      // primary
                    canvas
                        .append("line")
                        .attr('class', 'Saverages')
                        .attr('x1', width/2 - parseFloat(mapX1(99.66))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(99.66))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#bf8b2e")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Saverages')
                        .attr('x', width/2 - parseFloat(mapX1(99.66))/2 + 20)
                        .attr('y',  '4vh')
                        .text("P")
                        .attr('fill', "#bf8b2e")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Saverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(99.66))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(99.66))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#bf8b2e")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Saverages')
                        .attr('x', width/2 + parseFloat(mapX1(99.66))/2 - 20)
                        .attr('y',  '4vh')
                        .text("P")
                        .attr('fill', "#bf8b2e")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                    
                    // secondary
                     canvas
                        .append("line")
                        .attr('class', 'Saverages')
                        .attr('x1', width/2 - parseFloat(mapX1(67.34))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(67.34))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#bf8b2e")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Saverages')
                        .attr('x', width/2 - parseFloat(mapX1(67.34))/2 + 20)
                        .attr('y',  '4vh')
                        .text("S")
                        .attr('fill', "#bf8b2e")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Saverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(67.34))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(67.34))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#bf8b2e")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Saverages')
                        .attr('x', width/2 + parseFloat(mapX1(67.34))/2 - 20)
                        .attr('y',  '4vh')
                        .text("S")
                        .attr('fill', "#bf8b2e")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    // tertiary
                     canvas
                        .append("line")
                        .attr('class', 'Saverages')
                        .attr('x1', width/2 - parseFloat(mapX1(11.26))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(11.26))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#bf8b2e")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Saverages')
                        .attr('x', width/2 - parseFloat(mapX1(11.26))/2 + 20)
                        .attr('y',  '4vh')
                        .text("T")
                        .attr('fill', "#bf8b2e")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Saverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(11.26))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(11.26))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#bf8b2e")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Saverages')
                        .attr('x', width/2 + parseFloat(mapX1(11.26))/2 - 20)
                        .attr('y',  '4vh')
                        .text("T")
                        .attr('fill', "#bf8b2e")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');    
                        
                        
                        // document.getElementById('south').style.border = "2px solid #5e5e5e";
                        //add data to filtdata here and run change visual along with color parameter and group class name
                        filtData = [];
                        for(var i = 0; i < data.length; i++){
                            if(data[i]['subRegion'] == 'Southern Africa'){
                                filtData.push(data[i]);
                            }
                        }
                    d3.select(this)
                    .style("fill", "#bf8b2e")
                    
                    visualChange(filtData, "#bf8b2e", "funnelGroupSouth")    
                    southCheck = 1;
                    
                    };
                })
                
                d3.select("#center").on("click", function(){
                    if(centerCheck == 1){
                        document.getElementById('center').style.background = "white";
                        document.getElementById('center').style.color = "#4c9f38";
                        // document.getElementById('center').style.border = "0px solid #333333";
                        d3.selectAll(".funnelGroupCenter").remove();
                        d3.selectAll(".Caverages").remove()
                        centerCheck = 0;
                        
                    }else{
                        d3.selectAll('.funnelGroup2').remove();
                        document.getElementById('center').style.background = "#4c9f38";
                        document.getElementById('center').style.color = "white";
                        
                           // primary
                    canvas
                        .append("line")
                        .attr('class', 'Caverages')
                        .attr('x1', width/2 - parseFloat(mapX1(93.76))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(93.76))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#4c9f38")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Caverages')
                        .attr('x', width/2 - parseFloat(mapX1(93.76))/2 + 20)
                        .attr('y',  '4vh')
                        .text("P")
                        .attr('fill', "#4c9f38")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Caverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(93.76))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(93.76))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#4c9f38")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Caverages')
                        .attr('x', width/2 + parseFloat(mapX1(93.76))/2 - 20)
                        .attr('y',  '4vh')
                        .text("P")
                        .attr('fill', "#4c9f38")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                    
                    // secondary
                     canvas
                        .append("line")
                        .attr('class', 'Caverages')
                        .attr('x1', width/2 - parseFloat(mapX1(34.1))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(34.1))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#4c9f38")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Caverages')
                        .attr('x', width/2 - parseFloat(mapX1(34.1))/2 + 20)
                        .attr('y',  '4vh')
                        .text("S")
                        .attr('fill', "#4c9f38")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Caverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(34.1))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(34.1))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#4c9f38")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Caverages')
                        .attr('x', width/2 + parseFloat(mapX1(34.1))/2 - 20)
                        .attr('y',  '4vh')
                        .text("S")
                        .attr('fill', "#4c9f38")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    // tertiary
                     canvas
                        .append("line")
                        .attr('class', 'Caverages')
                        .attr('x1', width/2 - parseFloat(mapX1(5.57))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(5.57))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#4c9f38")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Caverages')
                        .attr('x', width/2 - parseFloat(mapX1(5.57))/2 + 20)
                        .attr('y',  '4vh')
                        .text("T")
                        .attr('fill', "#4c9f38")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Caverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(5.57))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(5.57))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#4c9f38")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Caverages')
                        .attr('x', width/2 + parseFloat(mapX1(5.57))/2 - 20)
                        .attr('y',  '4vh')
                        .text("T")
                        .attr('fill', "#4c9f38")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');   
                        // document.getElementById('center').style.border = "2px solid #5e5e5e";
                        //add data to filtdata here and run change visual along with color parameter and group class name
                        filtData = [];
                        for(var i = 0; i < data.length; i++){
                            if(data[i]['subRegion'] == 'Middle Africa'){
                                filtData.push(data[i]);
                            }
                        }
                    
                    visualChange(filtData, "#4c9f38", "funnelGroupCenter")    
                    centerCheck = 1;
                    
                    };
                })
                
                d3.select("#east").on("click", function(){
                    if(eastCheck == 1){
                        document.getElementById('east').style.background = "white";
                        document.getElementById('east').style.color = "#26bde2";
                        d3.selectAll(".funnelGroupEast").remove();
                        d3.selectAll(".Eaverages").remove()
                        eastCheck = 0;
                        
                    }else{
                        d3.selectAll('.funnelGroup2').remove();
                        document.getElementById('east').style.background = "#26bde2";
                        document.getElementById('east').style.color = "white";
                        
                           // primary
                    canvas
                        .append("line")
                        .attr('class', 'Eaverages')
                        .attr('x1', width/2 - parseFloat(mapX1(89.86))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(89.86))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#26bde2")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Eaverages')
                        .attr('x', width/2 - parseFloat(mapX1(89.86))/2 + 20)
                        .attr('y',  '4vh')
                        .text("P")
                        .attr('fill', "#26bde2")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Eaverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(89.86))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(89.86))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#26bde2")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Eaverages')
                        .attr('x', width/2 + parseFloat(mapX1(89.86))/2 - 20)
                        .attr('y',  '4vh')
                        .text("P")
                        .attr('fill', "#26bde2")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                    
                    // secondary
                     canvas
                        .append("line")
                        .attr('class', 'Eaverages')
                        .attr('x1', width/2 - parseFloat(mapX1(38.32))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(38.32))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#26bde2")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Eaverages')
                        .attr('x', width/2 - parseFloat(mapX1(38.32))/2 + 20)
                        .attr('y',  '4vh')
                        .text("S")
                        .attr('fill', "#26bde2")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Eaverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(38.32))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(38.32))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#26bde2")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Eaverages')
                        .attr('x', width/2 + parseFloat(mapX1(38.32))/2 - 20)
                        .attr('y',  '4vh')
                        .text("S")
                        .attr('fill', "#26bde2")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    // tertiary
                     canvas
                        .append("line")
                        .attr('class', 'Eaverages')
                        .attr('x1', width/2 - parseFloat(mapX1(5.50))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(5.50))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#26bde2")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Eaverages')
                        .attr('x', width/2 - parseFloat(mapX1(5.50))/2 + 20)
                        .attr('y',  '4vh')
                        .text("T")
                        .attr('fill', "#26bde2")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Eaverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(5.50))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(5.50))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#26bde2")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Eaverages')
                        .attr('x', width/2 + parseFloat(mapX1(5.50))/2 - 20)
                        .attr('y',  '4vh')
                        .text("T")
                        .attr('fill', "#26bde2")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');   
                        // document.getElementById('east').style.border = "2px solid #5e5e5e";
                        //add data to filtdata here and run change visual along with color parameter and group class name
                        filtData = [];
                        for(var i = 0; i < data.length; i++){
                            if(data[i]['subRegion'] == 'Eastern Africa'){
                                filtData.push(data[i]);
                            }
                        }
                    
                    visualChange(filtData, "#26bde2", "funnelGroupEast")    
                    eastCheck = 1;
                    
                    };
                })
                
                d3.select("#west").on("click", function(){
                    if(westCheck == 1){
                        document.getElementById('west').style.background = "white";
                        document.getElementById('west').style.color = "#fd6925";
                        
                        
                        // document.getElementById('west').style.border = "0px solid #333333";
                        d3.selectAll(".funnelGroupWest").remove();
                        d3.selectAll(".Waverages").remove();
                        westCheck = 0;
                        
                    }else{
                        d3.selectAll('.funnelGroup2').remove();
                        document.getElementById('west').style.background = "#fd6925";
                        document.getElementById('west').style.color = "white";
                        
                           // primary
                    canvas
                        .append("line")
                        .attr('class', 'Waverages')
                        .attr('x1', width/2 - parseFloat(mapX1(89.80))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(89.80))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#fd6925")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Waverages')
                        .attr('x', width/2 - parseFloat(mapX1(89.80))/2 + 20)
                        .attr('y',  '4vh')
                        .text("P")
                        .attr('fill', "#fd6925")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Waverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(89.80))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(89.80))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#fd6925")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Waverages')
                        .attr('x', width/2 + parseFloat(mapX1(89.80))/2 - 20)
                        .attr('y',  '4vh')
                        .text("P")
                        .attr('fill', "#fd6925")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                    
                    // secondary
                     canvas
                        .append("line")
                        .attr('class', 'Waverages')
                        .attr('x1', width/2 - parseFloat(mapX1(39.68))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(39.68))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#fd6925")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Waverages')
                        .attr('x', width/2 - parseFloat(mapX1(39.68))/2 + 20)
                        .attr('y',  '4vh')
                        .text("S")
                        .attr('fill', "#fd6925")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Waverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(39.68))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(39.68))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#fd6925")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Waverages')
                        .attr('x', width/2 + parseFloat(mapX1(39.68))/2 - 20)
                        .attr('y',  '4vh')
                        .text("S")
                        .attr('fill', "#fd6925")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    // tertiary
                     canvas
                        .append("line")
                        .attr('class', 'Waverages')
                        .attr('x1', width/2 - parseFloat(mapX1(6.97))/2 + 20)
                        .attr('y1',  0)
                        .attr('x2', width/2 - parseFloat(mapX1(6.97))/2 + 20)
                        .attr('y2', 12)
                        .attr('stroke', "#fd6925")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Waverages')
                        .attr('x', width/2 - parseFloat(mapX1(6.97))/2 + 20)
                        .attr('y',  '4vh')
                        .text("T")
                        .attr('fill', "#fd6925")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');
                        
                    canvas
                        .append("line")
                        .attr('class', 'Waverages')    
                        .attr('x1', width/2 + parseFloat(mapX1(6.97))/2 - 20)
                        .attr('y1', 0)
                        .attr('x2', width/2 + parseFloat(mapX1(6.97))/2 - 20)
                        .attr('y2', 12)
                        .attr('stroke', "#fd6925")
                        .attr('stroke-width', 2);
                    
                    canvas
                        .append("text")
                        .attr('class', 'Waverages')
                        .attr('x', width/2 + parseFloat(mapX1(6.97))/2 - 20)
                        .attr('y',  '4vh')
                        .text("T")
                        .attr('fill', "#fd6925")
                        .attr("font-family", "'Roboto', sans-serif")
                        .attr("font-weight", "700")
                        .attr("font-size", "2vh")
                        .attr('text-anchor', 'middle');   
                        
                        // document.getElementById('west').style.border = "2px solid #5e5e5e";
                        //add data to filtdata here and run change visual along with color parameter and group class name
                        filtData = [];
                        for(var i = 0; i < data.length; i++){
                            if(data[i]['subRegion'] == 'Western Africa'){
                                filtData.push(data[i]);
                            }
                        }
                    
                    visualChange(filtData, "#fd6925", "funnelGroupWest")    
                    westCheck = 1;
                    
                    };
                })
                
                                    
                
                
                d3.select("#regions").on("change",function(){
                filtData = [];
                
                for(var i = 0; i<data.length; i++){
                    if(regions[this.selectedIndex] == data[i]['subRegion']){
                     filtData.push(data[i]);   
                    }
                }
                console.log(filtData);
                d3.selectAll("#funnelgrp").remove();
                changeVisual(filtData);
                });
                
            }); //function(err, data) ends 
            }
                
            var mapX1 = d3.scaleLinear().domain([0, 100]).range([50, width - 50]);
            var mapX2 = d3.scaleLinear().domain([0, 100]).range([50, width - 50]);   
            var mapX3 = d3.scaleLinear().domain([0, 100]).range([50, width - 50]);  
            
            var div = d3.select("body").append("div")	
                                    .attr("class", "tooltip")				
                                    .style("opacity", 0)
                                    .attr("x", "200");
                                    
            function createAxes(){
    
                var axisTop = canvas
                                .append("line")
                                .attr("x1", 40)
                                .attr("y1", 0)
                                .attr("x2", width - 40)
                                .attr("y2", 0)
                                .attr("stroke-width", 2)
                                .attr("stroke", "black");
                    // 0%            
                            canvas
                            .append("line")
                            .attr("x1", width/2)
                            .attr("y1", 0)
                            .attr("x2", width/2)
                            .attr("y2", 3)
                            .attr("stroke-width", 0.75)
                            .attr("stroke", "black");
                            
                            canvas
                            .append("text")
                            .attr("x", width/2)
                            .attr("y", 15)
                            .text("0%")
                            .style("fill", "black")
                            .attr("text-anchor", "middle")
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "300")
                            .attr("font-size", "12");
                    
                    // 100%            
                            canvas
                            .append("line")
                            .attr("x1", 40)
                            .attr("y1", 0)
                            .attr("x2", 40)
                            .attr("y2", 3)
                            .attr("stroke-width", 0.75)
                            .attr("stroke", "black");
                            
                            canvas
                            .append("text")
                            .attr("x", 40)
                            .attr("y", 15)
                            .text("100%")
                            .style("fill", "black")
                            .attr("text-anchor", "middle")
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "300")
                            .attr("font-size", "12");
                            
                            canvas
                            .append("line")
                            .attr("x1", width - 40)
                            .attr("y1", 0)
                            .attr("x2", width - 40)
                            .attr("y2", 3)
                            .attr("stroke-width", 0.75)
                            .attr("stroke", "black");
                            
                            canvas
                            .append("text")
                            .attr("x", width - 40)
                            .attr("y", 15)
                            .text("100%")
                            .style("fill", "black")
                            .attr("text-anchor", "middle")
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "300")
                            .attr("font-size", "12");
                            
                    // 25%
                           canvas
                            .append("line")
                            .attr("x1", (width/2 - 40)*3/4 + 40)
                            .attr("y1", 0)
                            .attr("x2", (width/2 - 40)*3/4 + 40)
                            .attr("y2", 3)
                            .attr("stroke-width", 0.75)
                            .attr("stroke", "black");
                            
                            canvas
                            .append("text")
                            .attr("x", (width/2 - 40)*3/4 + 40)
                            .attr("y", 15)
                            .text("25%")
                            .style("fill", "black")
                            .attr("text-anchor", "middle")
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "300")
                            .attr("font-size", "12");
                            
                            canvas
                            .append("line")
                            .attr("x1", width/2 + (width/2 - 40)*1/4) 
                            .attr("y1", 0)
                            .attr("x2", width/2 + (width/2 - 40)*1/4)
                            .attr("y2", 3)
                            .attr("stroke-width", 0.75)
                            .attr("stroke", "black");
                            
                             canvas
                            .append("text")
                            .attr("x", width/2 + (width/2 - 40)*1/4)
                            .attr("y", 15)
                            .text("25%")
                            .style("fill", "black")
                            .attr("text-anchor", "middle")
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "300")
                            .attr("font-size", "12");
                            
                            
                            
                    // 75%
                            
                            canvas
                            .append("line")
                            .attr("x1", (width/2 - 40)*1/4 + 40)
                            .attr("y1", 0)
                            .attr("x2", (width/2 - 40)*1/4 + 40)
                            .attr("y2", 3)
                            .attr("stroke-width", 0.75)
                            .attr("stroke", "black");
                            
                            canvas
                            .append("text")
                            .attr("x", (width/2 - 40)*1/4 + 40)
                            .attr("y", 15)
                            .text("75%")
                            .style("fill", "black")
                            .attr("text-anchor", "middle")
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "300")
                            .attr("font-size", "12");
                            
                            
                            canvas
                            .append("line")
                            .attr("x1", width/2 + (width/2 - 40)*3/4) 
                            .attr("y1", 0)
                            .attr("x2", width/2 + (width/2 - 40)*3/4)
                            .attr("y2", 3)
                            .attr("stroke-width", 0.75)
                            .attr("stroke", "black");
                            
                            canvas
                            .append("text")
                            .attr("x", width/2 + (width/2 - 40)*3/4)
                            .attr("y", 15)
                            .text("75%")
                            .style("fill", "black")
                            .attr("text-anchor", "middle")
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "300")
                            .attr("font-size", "12");
                            
                            
                    
                    // 50%
                            canvas
                            .append("line")
                            .attr("x1", (width/2 - 40)*1/2 + 40)
                            .attr("y1", 0)
                            .attr("x2", (width/2 - 40)*1/2 + 40)
                            .attr("y2", 3)
                            .attr("stroke-width", 0.75)
                            .attr("stroke", "black");
                            
                            canvas
                            .append("text")
                            .attr("x", (width/2 - 40)*1/2 + 40)
                            .attr("y", 15)
                            .text("50%")
                            .style("fill", "black")
                            .attr("text-anchor", "middle")
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "300")
                            .attr("font-size", "12");
                            
                            canvas
                            .append("line")
                            .attr("x1", width/2 + (width/2 - 40)*1/2) 
                            .attr("y1", 0)
                            .attr("x2", width/2 + (width/2 - 40)*1/2)
                            .attr("y2", 3)
                            .attr("stroke-width", 0.75)
                            .attr("stroke", "black"); 
                            
                            canvas
                            .append("text")
                            .attr("x", width/2 + (width/2 - 40)*1/2)
                            .attr("y", 15)
                            .text("50%")
                            .style("fill", "black")
                            .attr("text-anchor", "middle")
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "300")
                            .attr("font-size", "12");
    
    // ------------- create axis ONE -------------------------------- 
                
                
                
                var axis1 = canvas
                                .append("line")
                                .attr("x1", 40 )
                                .attr("y1", 20 + 50)
                                .attr("x2", width - 40)
                                .attr("y2", 20 + 50)
                                .attr("stroke-width", 0.5)
                                .attr("stroke", "gray");
                                
                            canvas
                                .append("line")
                                .attr("x1", 40 )
                                .attr("y1", 20 - 5 + 50)
                                .attr("x2", 40)
                                .attr("y2", 20 + 5 + 50)
                                .attr("stroke-width", 1)
                                .attr("stroke", "gray");
      
                            canvas
                                .append("line")
                                .attr("x1", width - 40 )
                                .attr("y1", 20 - 5 + 50)
                                .attr("x2", width - 40)
                                .attr("y2", 20 + 5 + 50)
                                .attr("stroke-width", 1)
                                .attr("stroke", "gray");
                            
                            canvas
                                .append("line")
                                .attr("x1", width/2 )
                                .attr("y1", 20 - 5 + 50)
                                .attr("x2", width/2)
                                .attr("y2", 20 + 5 + 50)
                                .attr("stroke-width", 1)
                                .attr("stroke", "gray");    
                                
                            canvas
                                .append("text")
                                .attr("x", 40)
                                .attr("y", 20 + 20 + 50)
                                .text("")
                                .attr("text-anchor", "middle")
                                .attr("font-family", "'Roboto', sans-serif")
                                .attr("font-weight", "300")
                                .attr("font-size", "12")
                                .attr("fill", "LightGrey");
                                
                            canvas
                                .append("text")
                                .attr("x", width - 40)
                                .attr("y", 20 + 20  + 50)
                                .text("")
                                .attr("text-anchor", "middle")
                                .attr("font-family", "'Roboto', sans-serif")
                                .attr("font-weight", "300")
                                .attr("font-size", "12")
                                .attr("fill", "LightGrey"); 
                                
                             canvas
                                .append("text")
                                .attr("x", width/2)
                                .attr("y", 20 + 20 + 50)
                                .attr("text-anchor", "middle")
                                .text("PRIMARY ENROLLMENT")
                                .attr("font-family", "'Roboto', sans-serif")
                                .attr("font-weight", "700")
                                .attr("font-size", "10")
                                .attr("fill", "gray"); 
                                
                    // var imgs = canvas.selectAll("image").data([0]);
                    //                 imgs.enter()
                    //                     .append("svg:image")
                    //                     .attr("id", "arrow")
                    //                     .attr("xlink:href", "arrow.png")
                    //                     .attr("x", width/2 - 105)
                    //                     .attr("y", 80)
                    //                     .attr("width", "210")
                    //                     .attr("height", "70")
                    //                     .attr("opacity", 0.7);
                 
    
    // ------------- create axis TWO --------------------------------
    
                var axis2 = canvas
                                .append("line")
                                .attr("x1", 40 )
                                .attr("y1", height/2)
                                .attr("x2", width - 40)
                                .attr("y2", height/2)
                                .attr("stroke-width", 0.5)
                                .attr("stroke", "gray");                            
    
                             canvas
                                .append("line")
                                .attr("x1", 40 )
                                .attr("y1", height/2 - 5)
                                .attr("x2", 40)
                                .attr("y2", height/2 + 5)
                                .attr("stroke-width", 1)
                                .attr("stroke", "gray"); 
                
                            canvas
                                .append("line")
                                .attr("x1", width - 40 )
                                .attr("y1", height/2 - 5)
                                .attr("x2", width - 40)
                                .attr("y2", height/2 + 5)
                                .attr("stroke-width", 1)
                                .attr("stroke", "gray"); 
                            
                            canvas
                                .append("line")
                                .attr("x1", width/2 )
                                .attr("y1", height/2 - 5)
                                .attr("x2", width/2)
                                .attr("y2", height/2 + 5)
                                .attr("stroke-width", 1)
                                .attr("stroke", "gray"); 
                                
                            canvas
                                .append("text")
                                .attr("x", 40)
                                .attr("y", height/2 + 20)
                                .text("")
                                .attr("text-anchor", "middle")
                                .attr("font-family", "'Roboto', sans-serif")
                                .attr("font-weight", "300")
                                .attr("font-size", "12")
                                .attr("fill", "LightGrey");
                                
                            canvas
                                .append("text")
                                .attr("x", width - 40)
                                .attr("y", height/2 + 20)
                                .text("")
                                .attr("text-anchor", "middle")
                                .attr("font-family", "'Roboto', sans-serif")
                                .attr("font-weight", "300")
                                .attr("font-size", "12")
                                .attr("fill", "LightGrey");    
                                
                                
                            canvas
                                .append("text")
                                .attr("x", width/2)
                                .attr("y", height/2 + 20)
                                .attr("text-anchor", "middle")
                                .text("SECONDARY ENROLLMENT")
                                .attr("font-family", "'Roboto', sans-serif")
                                .attr("font-weight", "700")
                                .attr("font-size", "10")
                                .attr("fill", "gray");    
                                
                
    // ------------- create axis THREE --------------------------------            
                
                var axis3 = canvas
                                .append("line")
                                .attr("x1", 40 )
                                .attr("y1", height - 40 - 30)
                                .attr("x2", width - 40)
                                .attr("y2", height - 40 - 30)
                                .attr("stroke-width", 0.5)
                                .attr("stroke", "gray");
                                
                            canvas
                                .append("text")
                                .attr("x", 40)
                                .attr("id", "label50a")
                                .attr("y", height - 40 + 20 - 30)
                                .text("")
                                .attr("text-anchor", "middle")
                                .attr("font-family", "'Roboto', sans-serif")
                                .attr("font-weight", "300")
                                .attr("font-size", "12")
                                .attr("fill", "LightGrey");
                                
                            canvas
                                .append("text")
                                .attr("x", width - 40)
                                .attr("y", height - 40 + 20 - 30)
                                .attr("id", "label50b")
                                .text("")
                                .attr("text-anchor", "middle")
                                .attr("font-family", "'Roboto', sans-serif")
                                .attr("font-weight", "300")
                                .attr("font-size", "12")
                                .attr("fill", "LightGrey");                    
                                
                            canvas
                                .append("line")
                                .attr("x1", 40 )
                                .attr("y1", height - 40 - 5 - 30)
                                .attr("x2", 40)
                                .attr("y2", height - 40 + 5 - 30)
                                .attr("stroke-width", 1)
                                .attr("stroke", "gray"); 
                
                            canvas
                                .append("line")
                                .attr("x1", width - 40 )
                                .attr("y1", height - 40 - 5 - 30)
                                .attr("x2", width - 40)
                                .attr("y2", height - 40 + 5 - 30)
                                .attr("stroke-width", 1)
                                .attr("stroke", "gray"); 
                            
                            canvas
                                .append("line")
                                .attr("x1", width/2 )
                                .attr("y1", height - 40 - 5 - 30)
                                .attr("x2", width/2)
                                .attr("y2", height - 40 + 5 - 30)
                                .attr("stroke-width", 1)
                                .attr("stroke", "gray");
                                
                            canvas
                                .append("text")
                                .attr("x", width/2)
                                .attr("y", height - 40 + 20 - 30)
                                .text("TERTIARY ENROLLMENT")
                                .attr("text-anchor", "middle")
                                .attr("font-family", "'Roboto', sans-serif")
                                .attr("font-weight", "700")
                                .attr("font-size", "10")
                                .attr("fill", "gray");  
                                
                            
    // ---------------
    
    }
            
            function expand(){
            d3.selectAll(".funnelGroup").remove();
            d3.selectAll(".funnelGroup2").remove();

            var mapX3old = d3.scaleLinear().domain([0, 100]).range([50, width - 50]);
            mapX3 = d3.scaleLinear().domain([0, 10]).range([50, width - 50]);
            
            var mapX2old = d3.scaleLinear().domain([0, 100]).range([50, width - 50]);
            mapX2 = d3.scaleLinear().domain([0, 100]).range([width - 100, width - 50]);
            
            var mapX1old = d3.scaleLinear().domain([0, 100]).range([50, width - 50]);
            mapX1 = d3.scaleLinear().domain([0, 100]).range([width - 100, width - 50]);
            
            // use positions from funnel group 2 and transition the funnelGroup two element to x10 times the position and then remove it
            // then add a time delay and run the firstvisual function
            // increase margins from both sides
            // add context at the top
             d3.csv("quantData2.csv", function(error, data) {
                if (error) throw error;
            var expandGroup = canvas.selectAll('.expandGroup')
                                        .data(data)
                                        .enter()
                                        .append('g');
            
                    var primary1 = expandGroup
                                    .append("circle")
                                    .attr("class", "expandGroup")
                                    .attr('cx', function(d, i) { return width/2 + parseFloat(mapX1old(d['enrolTertiary']))/2 - 20;})
                                    .attr('cy', 20)
                                    .attr('r', 6)
                                    .attr('fill', '#27bde2')
                                    .attr('fill-opacity', 0.3)
                                    .transition()
                                    .duration(1500)
                                    .attr('cy', 20)
                                    .attr('cx', function(d, i) { return width/2 + parseFloat(mapX1(d['enrolTertiary']))/2 - 20;})
                                    .remove();
                    var primary2 = expandGroup
                                    .append("circle")
                                    .attr("class", "expandGroup")
                                    .attr('cx', function(d, i) { return width/2 - parseFloat(mapX1old(d['enrolTertiary']))/2 + 20;})
                                    .attr('cy', 20)
                                    .attr('r', 6)
                                    .attr('fill', '#27bde2')
                                    .attr('fill-opacity', 0.3)
                                    .transition()
                                    .duration(1500)
                                    .attr('cy', 20)
                                    .attr('cx', function(d, i) { return width/2 - parseFloat(mapX1(d['enrolTertiary']))/2 + 20;})
                                    .remove();
                    
                    var sec1 = expandGroup
                                    .append("circle")
                                    .attr("class", "expandGroup")
                                    .attr('cx', function(d, i) { return width/2 + parseFloat(mapX2old(d['enrolTertiary']))/2 - 20;})
                                    .attr('cy', height/2)
                                    .attr('r', 6)
                                    .attr('fill', '#27bde2')
                                    .attr('fill-opacity', 0.3)
                                    .transition()
                                    .duration(1500)
                                    .attr('cy', height/2)
                                    .attr('cx', function(d, i) { return width/2 + parseFloat(mapX2(d['enrolTertiary']))/2 - 20;})
                                    .remove();
                    var sec2 = expandGroup
                                    .append("circle")
                                    .attr("class", "expandGroup")
                                    .attr('cx', function(d, i) { return width/2 - parseFloat(mapX2old(d['enrolTertiary']))/2 + 20;})
                                    .attr('cy', height/2)
                                    .attr('r', 6)
                                    .attr('fill', '#27bde2')
                                    .attr('fill-opacity', 0.3)
                                    .transition()
                                    .duration(1500)
                                    .attr('cy', height/2)
                                    .attr('cx', function(d, i) { return width/2 - parseFloat(mapX2(d['enrolTertiary']))/2 + 20;})
                                    .remove();
                    
                    
                    
                    var tertiary1 = expandGroup
                                    .append("circle")
                                    .attr("class", "expandGroup")
                                    .attr('cx', function(d, i) { return width/2 + parseFloat(mapX3old(d['enrolTertiary']))/2 - 20;})
                                    .attr('cy', height - 40)
                                    .attr('r', 6)
                                    .attr('fill', '#27bde2')
                                    .attr('fill-opacity', 0.3)
                                    .transition()
                                    .duration(1500)
                                    .attr('cy', height - 40)
                                    .attr('cx', function(d, i) { return width/2 + parseFloat(mapX3(d['enrolTertiary']))/2 - 20;})
                                    .remove();
                    var tertiary2 = expandGroup
                                    .append("circle")
                                    .attr("class", "expandGroup")
                                    .attr('cx', function(d, i) { return width/2 - parseFloat(mapX3old(d['enrolTertiary']))/2 + 20;})
                                    .attr('cy', height - 40)
                                    .attr('r', 6)
                                    .attr('fill', '#27bde2')
                                    .attr('fill-opacity', 0.3)
                                    .transition()
                                    .duration(1500)
                                    .attr('cy', height - 40)
                                    .attr('cx', function(d, i) { return width/2 - parseFloat(mapX3(d['enrolTertiary']))/2 + 20;})
                                    .remove();
                            
                            d3.select("#label50a")
                                    .transition()
                                    .duration(1500)
                                    .text("10%");
                            
                            d3.select("#label50b")
                                    .transition()
                                    .duration(1500)
                                    .text("10%");        
                            
                                    
             }); 
            
            setTimeout(function() { firstVisual(); }, 1500);
           
        }
             
            function begin(){
               
            d3.selectAll(".funnelGroupWest").remove();
            d3.selectAll(".funnelGroupNorth").remove();
            d3.selectAll(".funnelGroupSouth").remove();
            d3.selectAll(".funnelGroupEast").remove();
            d3.selectAll(".funnelGroupCenter").remove();
            d3.selectAll(".textbox").remove();
            // d3.selectAll(".textboxNo").remove();
            d3.selectAll(".funnelGroup2").remove();
            d3.selectAll(".funnelGroup3").remove();
            d3.selectAll(".funnelGroup4").remove();
            d3.selectAll(".funnelGroup5").remove();
            
            var primText = canvas
                            .append("text")
                            .attr("class", "textbox")
                            .attr('id', 'primText1')
                            .attr('x', width/2)
                            .attr('text-anchor', 'middle')
                            .attr('y', 20 + 50 + 100)
                            .html("Over the past decade, the primary school enrollment rate in Africa" )
                            .attr('fill', 'black')
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "400")
                            .attr("font-size", "2vh")
                            .attr("opacity", 0)
                            .transition()
                            .delay(1000)
                            .attr("opacity", 1);
             var primText = canvas
                            .append("text")
                            .attr("class", "textbox")
                            .attr('id', 'primText2')
                            .attr('x', width/2)
                            .attr('text-anchor', 'middle')
                            .attr('y', 20 + 50 + 140)
                            .html("has significantly improved, now averaging over 90%")
                            .attr('fill', 'black')
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "400")
                            .attr("font-size", "2vh")
                            .attr("opacity", 0)
                            .transition()
                            .delay(1000)
                            .attr("opacity", 1);                
            
            var primAvgLine = canvas
                                .append("line")
                                .attr("class", "textboxNo")
                                .attr('id', 'primTextLine')
                                .attr('x1', width/2 + parseFloat(mapX1(91.97))/2 - 20)
                                .attr('y1',  20 + 50 + 40)
                                .attr('x2', width/2 - parseFloat(mapX1(91.97))/2 + 20)
                                .attr('y2', 20  + 50 + 40)
                                .attr("stroke-width", 3)
                                .attr("stroke-opacity", 0)
                                .attr("stroke", "#a21942")
                                .transition()
                                .delay(1000)
                                .attr("stroke-opacity", 0.5);
            
            var primAvgLine = canvas
                                .append("line")
                                .attr("class", "textboxNo")
                                .attr('id', 'primTextLine')
                                .attr('x1', width/2 - parseFloat(mapX1(91.97))/2 + 20)
                                .attr('y1',  20 + 50 + 40 - 20)
                                .attr('x2', width/2 - parseFloat(mapX1(91.97))/2 + 20)
                                .attr('y2', 20  + 50 + 40 + 20)
                                .attr("stroke-width", 3)
                                .attr("stroke-opacity", 0)
                                .attr("stroke", "#a21942")
                                .transition()
                                .delay(1000)
                                .attr("stroke-opacity", 0.5);
            
            var primAvgText = canvas
                            .append("text")
                            .attr("class", "textboxNo")
                            .attr('id', 'primText2')
                            .attr('x', width/2 - parseFloat(mapX1(91.97))/2 + 20 + 10)
                            .attr('y', 20 + 50 + 40 + 20 )
                            .html("AFRICAN AVERAGE: 92%")
                            .attr('fill', '#a21942')
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "700")
                            .attr("font-size", "12")
                            .attr("opacity", 0)
                            .transition()
                            .delay(1000)
                            .attr("opacity", 1);
                                
                                
            var primAvgLine = canvas
                                .append("line")
                                .attr("class", "textboxNo")
                                .attr('id', 'primTextLine')
                                .attr('x1', width/2 + parseFloat(mapX1(91.97))/2 - 20)
                                .attr('y1',  20 + 50 + 40 - 20)
                                .attr('x2', width/2 + parseFloat(mapX1(91.97))/2 - 20)
                                .attr('y2', 20  + 50 + 40 + 20)
                                .attr("stroke-width", 3)
                                .attr("stroke-opacity", 0)
                                .attr("stroke", "#a21942")
                                .transition()
                                .delay(1000)
                                .attr("stroke-opacity", 0.5);
                                
              
             d3.csv("quantData2.csv", function(error, data) {
                if (error) throw error;
                
              var funnelGroup3 = canvas.selectAll('.funnelGroup3')
                                        .data(data)
                                        .enter()
                                        .append('g'); 
                    
                    var prim1 = funnelGroup3
                                    .append("circle")
                                    .attr("class", "funnelGroup3")
                                    .attr("id", "circle1")
                                    .attr('cx', function(d, i) { return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20;})
                                    .attr('cy', 20 + 50)
                                    .attr('r', 6)
                                    .attr('fill', '#00689d')
                                    .attr('fill-opacity', 0.3);
                                    // .transition()
                                    // .duration(3500)
                                    // .remove();
                    
                    var prim2 = funnelGroup3
                                    .append("circle")
                                    .attr("class", "funnelGroup3")
                                    .attr("id", "circle2")
                                    .attr('cx', function(d, i) { return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20;})
                                    .attr('cy', 20 + 50)
                                    .attr('r', 6)
                                    .attr('fill', '#00689d')
                                    .attr('fill-opacity', 0.3);
                                    // .transition()
                                    // .duration(3500)
                                    // .remove();
                     
                     
                     
                     
                    
                    d3.selectAll(".funnelGroup3").on("mouseover", function(d) 
                                    {
                                   
                                    div.transition()		
                                        .duration(200)		
                                        .style("opacity", .9);
                                    
                                    var primColor, secColor, terColor;
                                    if(d['enrolPrimary'] >= 91.97){primColor = 'green';}else{ primColor = 'red'};
                                    if(d['enrolSecondary'] >= d['enrolSecondaryAvg']){secColor = 'green';}else{ secColor = 'red'};
                                    if(d['enrolTertiary'] >= 8.39){terColor = 'green';}else{ terColor = 'red'};
                                        
                                    div.html("<span style='font-size: 15px; text-align: left; text-transform: uppercase'>" + "<b>" + d['country'] + "</b> </span> <br>" 
                                                         // + "</span>" + "<br>" + "<span> <br> Primary:   </span>"+  "<b>"+ "<span style = 'color: " + primColor + "'>"  + d['enrolPrimary'] + "%" +  " </span> </b>"
                                                          + "<br>" + " Primary:  <b>" + "<span style='color: " + primColor + "'>" + d['enrolPrimary'] + "%" + "</span> </b>"
                                                           + "<br> <br>" + "<span style='color: green; font-size: 80%; text-transform: none;' >green</span><span style='font-size: 80%; text-transform: none';>: greater than Afr. avg.</span></b>"
                                                          + "<br>" + "<span style='color: red; font-size: 80%; text-transform: none;'>red</span><span style='font-size: 80%; text-transform: none';>: less than Afr. avg.</span></b>")	
                                        .style("left", (d3.event.pageX - 80) + "px")		
                                        .style("top", (d3.event.pageY + 30) + "px");
                                    })
                                .on("mouseout", function() {
                                    d3.select(this).selectAll("circle").style("stroke", 'white').style("stroke-width", "0").style("fill-opacity", "0.3");
                                    //d3.select(this).selectAll("#funnelLine").style("stroke-width", "0.3").style("stroke-opacity", "0").style("stroke", "yellow");
                                    d3.select(this).selectAll("line").style("stroke-width", "0.3").style("stroke-opacity", "0.5").style("stroke", "yellow");
                                    d3.selectAll("rect").style("fill-opacity", "0");
                                    
                                    
                                    div.transition()		
                                        .duration(500)		
                                        .style("opacity", 0);	
                                });
                                    
                    
                    
                    // var sec1 = funnelGroup3
                    //                 .append("circle")
                    //                 .attr("class", "funnelGroup3")
                    //                 .attr('cy', height/2)
                    //                 .attr('cx', function(d, i) { return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20;})
                    //                 .attr('r', 0)
                    //                 .attr('fill', '#27bde2')
                    //                 .attr('fill-opacity', 0.3)
                    //                 .transition()
                    //                 .delay(2000)
                    //                 .attr('r', 6)
                    //                 .transition()
                    //                 .duration(1500)
                    //                 .remove();
                    
                    //  var sec2 = funnelGroup3
                    //                 .append("circle")
                    //                 .attr("class", "funnelGroup3")
                    //                 .attr('cy', height/2)
                    //                 .attr('cx', function(d, i) { return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20;})
                    //                 .attr('r', 0)
                    //                 .attr('fill', '#27bde2')
                    //                 .attr('fill-opacity', 0.3)
                    //                 .transition()
                    //                 .delay(2000)
                    //                 .attr('r', 6)
                    //                 .transition()
                    //                 .duration(1500)
                    //                 .remove();                
                                    
                                        
                    
                    // var primSec1 = funnelGroup3
                    //                  .append("line")
                    //                  .attr("class", "funnelGroup3")
                    //                  .attr("x1", function(d, i) {return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20; })
                    //                  .attr("y1", function(d, i) { if(d['enrolSecondary'] !== ""){return 20;}else{return 10000;}})
                    //                  .attr("x2", function(d, i) {return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20; })
                    //                  .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return 20;}else{return 10000;}})
                    //                  .attr("stroke-width", 0.25)
                    //                  .attr("stroke-opacity", 0.5)
                    //                  .attr("stroke", "LightGrey")
                    //                  .transition()
                    //                  .delay(500)
                    //                  .duration(1500)
                    //                  .attr("x2", function(d, i) {return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2  + 20;})
                    //                  .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                    //                  .transition()
                    //                  .duration(1500)
                    //                  .remove();
                   
                    // var primSec2 = funnelGroup3
                    //                  .append("line")
                    //                  .attr("class", "funnelGroup3")
                    //                  .attr("x1", function(d, i) {return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20; })
                    //                  .attr("y1", function(d, i) { if(d['enrolSecondary'] !== ""){return 20;}else{return 10000;}})
                    //                  .attr("x2", function(d, i) {return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20; })
                    //                  .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return 20;}else{return 10000;}})
                    //                  .attr("stroke-width", 0.25)
                    //                  .attr("stroke-opacity", 0.5)
                    //                  .attr("stroke", "LightGrey")
                    //                  .transition()
                    //                  .delay(500)
                    //                  .duration(1500)
                    //                  .attr("x2", function(d, i) {return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2  - 20;})
                    //                  .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                    //                  .transition()
                    //                  .duration(1500)
                    //                  .remove();
                    
                    // var secTer1 = funnelGroup3
                    //                  .append("line")
                    //                  .attr("class", "funnelGroup3")
                    //                  .attr("x1", function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20; }})
                    //                  .attr("y1", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                    //                  .attr("x2", function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20; }})
                    //                  .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                    //                  .attr("stroke-width", 0.25)
                    //                  .attr("stroke-opacity", 0.5)
                    //                  .attr("stroke", "LightGrey")
                    //                  .transition()
                    //                  .delay(2000)
                    //                  .duration(1500)
                    //                  .attr("x2", function(d, i) {if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX3(d['enrolTertiary']))/2 - 20;} })
                    //                  .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40;}else{return 10000;}})
                    //                  .remove();                 
                    
                    // var secTer2 = funnelGroup3
                    //                  .append("line")
                    //                  .attr("class", "funnelGroup3")
                    //                  .attr("x1", function(d, i) { if(d['enrolTertiary'] !== ""){ return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20; }})
                    //                  .attr("y1", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                    //                  .attr("x2", function(d, i) { if(d['enrolTertiary'] !== ""){ return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20; }})
                    //                  .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                    //                  .attr("stroke-width", 0.25)
                    //                  .attr("stroke-opacity", 0.5)
                    //                  .attr("stroke", "LightGrey")
                    //                  .transition()
                    //                  .delay(2000)
                    //                  .duration(1500)
                    //                  .attr("x2", function(d, i) { if(d['enrolTertiary'] !== ""){ return width/2 - parseFloat(mapX3(d['enrolTertiary']))/2 + 20;} })
                    //                  .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40;}else{return 10000;}})
                    //                  .remove();
                                    
                    // var primary1 = funnelGroup3
                    //                 .append("circle")
                    //                 .attr("class", "funnelGroup3")
                    //                 .attr('cx', function(d, i) { return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20;})
                    //                 .attr('cy', 20)
                    //                 .attr('r', 6)
                    //                 .attr('fill', '#27bde2')
                    //                 .attr('fill-opacity', 0.3)
                    //                 .transition()
                    //                 .delay(500)
                    //                 .duration(1500)
                    //                 .attr('cy', height/2)
                    //                 .attr('cx', function(d, i) { return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20;})
                    //                 .transition()
                    //                 .duration(1500)
                    //                 .attr('cy', height - 40)
                    //                 .attr('cx', function(d, i) { return width/2 + parseFloat(mapX3(d['enrolTertiary']))/2 - 20;})
                    //                 .remove();
                    
                    // var primary2 = funnelGroup3
                    //                 .append("circle")
                    //                 .attr("class", "funnelGroup3")
                    //                 .attr('cx', function(d, i) { return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20;})
                    //                 .attr('cy', 20)
                    //                 .attr('r', 6)
                    //                 .attr('fill', '#27bde2')
                    //                 .attr('fill-opacity', 0.3)
                    //                 .transition()
                    //                 .delay(500)
                    //                 .duration(1500)
                    //                 .attr('cy', height/2)
                    //                 .attr('cx', function(d, i) { return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20;})
                    //                 .transition()
                    //                 .duration(1500)
                    //                 .attr('cy', height - 40)
                    //                 .attr('cx', function(d, i) { return width/2 - parseFloat(mapX3(d['enrolTertiary']))/2 + 20;})
                    //                 .remove(); 
                                    
                                    
                // Over the past decade, the primary school enrollment rate has significantly improved in sub-Saharan Africa, now averaging over 80%.
                // However, the poor secondary and tertiary enrollment rates are considerably restricting the region from moving it's eceonomy toward higher-productivity sectors. 
                  
              });
              
            //   setTimeout(function() {
            //      firstVisual(); }, 3500);
              
                // firstVisual();              
                 
             }
            
            function begin2(){
                
            d3.selectAll(".funnelGroupWest").remove();
            d3.selectAll(".funnelGroupNorth").remove();
            d3.selectAll(".funnelGroupSouth").remove();
            d3.selectAll(".funnelGroupEast").remove();
            d3.selectAll(".funnelGroupCenter").remove();
            d3.selectAll(".textbox").remove();
            // d3.selectAll(".textboxNo").remove();
            d3.selectAll(".funnelGroup2").remove();
            // d3.selectAll(".funnelGroup3").remove();
            d3.selectAll(".funnelGroup4").remove();
            d3.selectAll(".funnelGroup5").remove();
             
              var primText = canvas
                            .append("text")
                            .attr("class", "textbox")
                            .attr('id', 'primText1')
                            .attr('x', width/2)
                            .attr('text-anchor', 'middle')
                            .attr('y', 20 + 50 + 100)
                            .html("The secondary school enrollment rates vary widely across the " )
                            .attr('fill', 'black')
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "400")
                            .attr("font-size", "2vh")
                            .attr("opacity", 0)
                            .transition()
                            .delay(2000)
                            .attr("opacity", 1);
             var primText = canvas
                            .append("text")
                            .attr("class", "textbox")
                            .attr('id', 'primText2')
                            .attr('x', width/2)
                            .attr('text-anchor', 'middle')
                            .attr('y', 20 + 50 + 140)
                            .html("continent, with the average being 45%")
                            .attr('fill', 'black')
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "400")
                            .attr("font-size", "2vh")
                            .attr("opacity", 0)
                            .transition()
                            .delay(2000)
                            .attr("opacity", 1); 
                            
            var primAvgLine = canvas
                                .append("line")
                                .attr("class", "textboxNo")
                                .attr('id', 'primTextLine')
                                .attr('x1', width/2 + parseFloat(mapX1(45.01))/2 - 20)
                                .attr('y1',  height/2 + 40)
                                .attr('x2', width/2 - parseFloat(mapX1(45.01))/2 + 20)
                                .attr('y2', height/2 + 40)
                                .attr("stroke-width", 3)
                                .attr("stroke-opacity", 0)
                                .attr("stroke", "#a21942")
                                .transition()
                                .delay(2000)
                                .attr("stroke-opacity", 0.5);
            
            var primAvgLine = canvas
                                .append("line")
                                .attr("class", "textboxNo")
                                .attr('id', 'primTextLine')
                                .attr('x1', width/2 - parseFloat(mapX1(45.01))/2 + 20)
                                .attr('y1',  height/2 + 40 - 20)
                                .attr('x2', width/2 - parseFloat(mapX1(45.01))/2 + 20)
                                .attr('y2', height/2 + 40 + 20)
                                .attr("stroke-width", 3)
                                .attr("stroke-opacity", 0)
                                .attr("stroke", "#a21942")
                                .transition()
                                .delay(2000)
                                .attr("stroke-opacity", 0.5);
            
            var primAvgText = canvas
                            .append("text")
                            .attr("class", "textboxNo")
                            .attr('id', 'primText2')
                            .attr('x', width/2 - parseFloat(mapX1(45.01))/2 + 20 + 10)
                            .attr('y', height/2 + 40 + 20 )
                            .html("AFRICAN AVERAGE: 45%")
                            .attr('fill', '#a21942')
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "700")
                            .attr("font-size", "12")
                            .attr("opacity", 0)
                            .transition()
                            .delay(2000)
                            .attr("opacity", 1);
                                
                                
            var primAvgLine = canvas
                                .append("line")
                                .attr("class", "textboxNo")
                                .attr('id', 'primTextLine')
                                .attr('x1', width/2 + parseFloat(mapX1(45.01))/2 - 20)
                                .attr('y1',  height/2 + 40 - 20)
                                .attr('x2', width/2 + parseFloat(mapX1(45.01))/2 - 20)
                                .attr('y2', height/2 + 40 + 20)
                                .attr("stroke-width", 3)
                                .attr("stroke-opacity", 0)
                                .attr("stroke", "#a21942")
                                .transition()
                                .delay(2000)
                                .attr("stroke-opacity", 0.5);
                                                
            
              
             d3.csv("quantData2.csv", function(error, data) {
                if (error) throw error;
                
              var funnelGroup4 = canvas.selectAll('.funnelGroup4')
                                        .data(data)
                                        .enter()
                                        .append('g'); 
                                        
                                       
                    
                    var prim1 = funnelGroup4
                                    .append("circle")
                                    .attr("class", "funnelGroup4")
                                    .attr('cx', function(d, i) { return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20;})
                                    .attr('cy', 20 + 50)
                                    .attr('r', 6)
                                    .attr('fill', '#00689d')
                                    .attr('fill-opacity', 0.3)
                                    .transition()
                                    .duration(1500)
                                    .attr('cy', height/2)
                                    .attr('cx', function(d, i) { return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20;});
                                    
                    
                    var prim2 = funnelGroup4
                                    .append("circle")
                                    .attr("class", "funnelGroup4")
                                    .attr('cx', function(d, i) { return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20;})
                                    .attr('cy', 20 + 50)
                                    .attr('r', 6)
                                    .attr('fill', '#00689d')
                                    .attr('fill-opacity', 0.3)
                                    .transition()
                                    .duration(1500)
                                    .attr('cy', height/2)
                                    .attr('cx', function(d, i) { return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20;});
                                    
                                    
                    
                    d3.selectAll(".funnelGroup4").on("mouseover", function(d) 
                                    {
                                    d3.select(this).selectAll("circle").style("stroke", 'rgb(180, 180, 180)').style("stroke-width", "2.5").style("fill-opacity", "1"); // d3.select(this).selectAll("#funnelLine").style("stroke-width", "2");
                                    d3.select(this).selectAll("line").style("stroke-width", "2.5").style("stroke-opacity", "1"); 
                                    d3.select(this).selectAll("rect").style("fill-opacity", "1"); 
                                    div.transition()		
                                        .duration(200)		
                                        .style("opacity", .9);
                                    
                                    var primColor, secColor, terColor;
                                    if(d['enrolPrimary'] >= 91.97){primColor = 'green';}else{ primColor = 'red'};
                                    if(d['enrolSecondary'] >= d['enrolSecondaryAvg']){secColor = 'green';}else{ secColor = 'red'};
                                    if(d['enrolTertiary'] >= 8.39){terColor = 'green';}else{ terColor = 'red'};
                                        
                                    div.html("<span style='font-size: 15px; text-align: left; text-transform: uppercase'>" + "<b>" + d['country'] + "</b> </span> <br>" 
                                                         // + "</span>" + "<br>" + "<span> <br> Primary:   </span>"+  "<b>"+ "<span style = 'color: " + primColor + "'>"  + d['enrolPrimary'] + "%" +  " </span> </b>"
                                                          + "<br>" + " Primary:  <b>" + "<span style='color: " + primColor + "'>" + d['enrolPrimary'] + "%" + "</span> </b>" 
                                                          + "<br>" + " Secondary:  <b>" + "<span style='color: " + secColor + "'>" + d['enrolSecondary'] + "%" + "</span> </b>"
                                                           + "<br> <br>" + "<span style='color: green; font-size: 80%; text-transform: none;' >green</span><span style='font-size: 80%; text-transform: none';>: greater than Afr. avg.</span></b>"
                                                          + "<br>" + "<span style='color: red; font-size: 80%; text-transform: none;'>red</span><span style='font-size: 80%; text-transform: none';>: less than Afr. avg.</span></b>")	
                                        .style("left", (d3.event.pageX - 80) + "px")		
                                        .style("top", (d3.event.pageY + 30) + "px");
                                    })
                                .on("mouseout", function() {
                                    d3.select(this).selectAll("circle").style("stroke", 'white').style("stroke-width", "0").style("fill-opacity", "0.3");
                                    //d3.select(this).selectAll("#funnelLine").style("stroke-width", "0.3").style("stroke-opacity", "0").style("stroke", "yellow");
                                    d3.select(this).selectAll("line").style("stroke-width", "0.3").style("stroke-opacity", "0.5").style("stroke", "yellow");
                                    d3.select(this).selectAll("rect").style("fill-opacity", "0");
                                    
                                    
                                    div.transition()		
                                        .duration(500)		
                                        .style("opacity", 0);	
                                });
                                    
                    
                    
                    // var sec1 = funnelGroup3
                    //                 .append("circle")
                    //                 .attr("class", "funnelGroup3")
                    //                 .attr('cy', height/2)
                    //                 .attr('cx', function(d, i) { return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20;})
                    //                 .attr('r', 0)
                    //                 .attr('fill', '#27bde2')
                    //                 .attr('fill-opacity', 0.3)
                    //                 .transition()
                    //                 .delay(2000)
                    //                 .attr('r', 6)
                    //                 .transition()
                    //                 .duration(1500)
                    //                 .remove();
                    
                    //  var sec2 = funnelGroup3
                    //                 .append("circle")
                    //                 .attr("class", "funnelGroup3")
                    //                 .attr('cy', height/2)
                    //                 .attr('cx', function(d, i) { return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20;})
                    //                 .attr('r', 0)
                    //                 .attr('fill', '#27bde2')
                    //                 .attr('fill-opacity', 0.3)
                    //                 .transition()
                    //                 .delay(2000)
                    //                 .attr('r', 6)
                    //                 .transition()
                    //                 .duration(1500)
                    //                 .remove();                
                                    
                                        
                    
                    // var primSec1 = funnelGroup3
                    //                  .append("line")
                    //                  .attr("class", "funnelGroup3")
                    //                  .attr("x1", function(d, i) {return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20; })
                    //                  .attr("y1", function(d, i) { if(d['enrolSecondary'] !== ""){return 20;}else{return 10000;}})
                    //                  .attr("x2", function(d, i) {return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20; })
                    //                  .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return 20;}else{return 10000;}})
                    //                  .attr("stroke-width", 0.25)
                    //                  .attr("stroke-opacity", 0.5)
                    //                  .attr("stroke", "LightGrey")
                    //                  .transition()
                    //                  .delay(500)
                    //                  .duration(1500)
                    //                  .attr("x2", function(d, i) {return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2  + 20;})
                    //                  .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                    //                  .transition()
                    //                  .duration(1500)
                    //                  .remove();
                   
                    // var primSec2 = funnelGroup3
                    //                  .append("line")
                    //                  .attr("class", "funnelGroup3")
                    //                  .attr("x1", function(d, i) {return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20; })
                    //                  .attr("y1", function(d, i) { if(d['enrolSecondary'] !== ""){return 20;}else{return 10000;}})
                    //                  .attr("x2", function(d, i) {return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20; })
                    //                  .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return 20;}else{return 10000;}})
                    //                  .attr("stroke-width", 0.25)
                    //                  .attr("stroke-opacity", 0.5)
                    //                  .attr("stroke", "LightGrey")
                    //                  .transition()
                    //                  .delay(500)
                    //                  .duration(1500)
                    //                  .attr("x2", function(d, i) {return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2  - 20;})
                    //                  .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                    //                  .transition()
                    //                  .duration(1500)
                    //                  .remove();
                    
                    // var secTer1 = funnelGroup3
                    //                  .append("line")
                    //                  .attr("class", "funnelGroup3")
                    //                  .attr("x1", function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20; }})
                    //                  .attr("y1", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                    //                  .attr("x2", function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20; }})
                    //                  .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                    //                  .attr("stroke-width", 0.25)
                    //                  .attr("stroke-opacity", 0.5)
                    //                  .attr("stroke", "LightGrey")
                    //                  .transition()
                    //                  .delay(2000)
                    //                  .duration(1500)
                    //                  .attr("x2", function(d, i) {if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX3(d['enrolTertiary']))/2 - 20;} })
                    //                  .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40;}else{return 10000;}})
                    //                  .remove();                 
                    
                    // var secTer2 = funnelGroup3
                    //                  .append("line")
                    //                  .attr("class", "funnelGroup3")
                    //                  .attr("x1", function(d, i) { if(d['enrolTertiary'] !== ""){ return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20; }})
                    //                  .attr("y1", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                    //                  .attr("x2", function(d, i) { if(d['enrolTertiary'] !== ""){ return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20; }})
                    //                  .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                    //                  .attr("stroke-width", 0.25)
                    //                  .attr("stroke-opacity", 0.5)
                    //                  .attr("stroke", "LightGrey")
                    //                  .transition()
                    //                  .delay(2000)
                    //                  .duration(1500)
                    //                  .attr("x2", function(d, i) { if(d['enrolTertiary'] !== ""){ return width/2 - parseFloat(mapX3(d['enrolTertiary']))/2 + 20;} })
                    //                  .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40;}else{return 10000;}})
                    //                  .remove();
                                    
                    // var primary1 = funnelGroup3
                    //                 .append("circle")
                    //                 .attr("class", "funnelGroup3")
                    //                 .attr('cx', function(d, i) { return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20;})
                    //                 .attr('cy', 20)
                    //                 .attr('r', 6)
                    //                 .attr('fill', '#27bde2')
                    //                 .attr('fill-opacity', 0.3)
                    //                 .transition()
                    //                 .delay(500)
                    //                 .duration(1500)
                    //                 .attr('cy', height/2)
                    //                 .attr('cx', function(d, i) { return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20;})
                    //                 .transition()
                    //                 .duration(1500)
                    //                 .attr('cy', height - 40)
                    //                 .attr('cx', function(d, i) { return width/2 + parseFloat(mapX3(d['enrolTertiary']))/2 - 20;})
                    //                 .remove();
                    
                    // var primary2 = funnelGroup3
                    //                 .append("circle")
                    //                 .attr("class", "funnelGroup3")
                    //                 .attr('cx', function(d, i) { return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20;})
                    //                 .attr('cy', 20)
                    //                 .attr('r', 6)
                    //                 .attr('fill', '#27bde2')
                    //                 .attr('fill-opacity', 0.3)
                    //                 .transition()
                    //                 .delay(500)
                    //                 .duration(1500)
                    //                 .attr('cy', height/2)
                    //                 .attr('cx', function(d, i) { return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20;})
                    //                 .transition()
                    //                 .duration(1500)
                    //                 .attr('cy', height - 40)
                    //                 .attr('cx', function(d, i) { return width/2 - parseFloat(mapX3(d['enrolTertiary']))/2 + 20;})
                    //                 .remove(); 
                                    
                                    
                // Over the past decade, the primary school enrollment rate has significantly improved in sub-Saharan Africa, now averaging over 80%.
                // However, the poor secondary and tertiary enrollment rates are considerably restricting the region from moving it's eceonomy toward higher-productivity sectors. 
                  
              });
              
            //   setTimeout(function() {
            //      firstVisual(); }, 3500);
              
                // firstVisual();              
                 
             } 
             
            function begin3(){
            
            d3.selectAll(".funnelGroupWest").remove();
            d3.selectAll(".funnelGroupNorth").remove();
            d3.selectAll(".funnelGroupSouth").remove();
            d3.selectAll(".funnelGroupEast").remove();
            d3.selectAll(".funnelGroupCenter").remove();
            d3.selectAll(".textbox").remove();
            // d3.selectAll(".textboxNo").remove();
            d3.selectAll(".funnelGroup2").remove();
            // d3.selectAll(".funnelGroup3").remove();
            // d3.selectAll(".funnelGroup4").remove();
            d3.selectAll(".funnelGroup5").remove();
             
              var primText = canvas
                            .append("text")
                            .attr("class", "textbox")
                            .attr('id', 'primText1')
                            .attr('x', width/2)
                            .attr('text-anchor', 'middle')
                            .attr('y', 20 + 50 + 100)
                            .html("However, the poor tertiary enrollment rates are considerably restricting the region " )
                            .attr('fill', 'black')
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "400")
                            .attr("font-size", "2vh")
                            .attr("opacity", 0)
                            .transition()
                            .delay(2000)
                            .attr("opacity", 1);
             var primText = canvas
                            .append("text")
                            .attr("class", "textbox")
                            .attr('id', 'primText2')
                            .attr('x', width/2)
                            .attr('text-anchor', 'middle')
                            .attr('y', 20 + 50 + 140)
                            .html("from moving it's economy toward higher-productivity sectors.")
                            .attr('fill', 'black')
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "400")
                            .attr("font-size", "2vh")
                            .attr("opacity", 0)
                            .transition()
                            .delay(2000)
                            .attr("opacity", 1); 
                            
            var primAvgLine = canvas
                                .append("line")
                                .attr("class", "textboxNo")
                                .attr('id', 'primTextLine')
                                .attr('x1', width/2 + parseFloat(mapX1(8.39))/2 - 20)
                                .attr('y1',  height - 40 - 30 + 40 - 80)
                                .attr('x2', width/2 - parseFloat(mapX1(8.39))/2 + 20)
                                .attr('y2', height - 40 - 30 + 40 - 80)
                                .attr("stroke-width", 3)
                                .attr("stroke-opacity", 0)
                                .attr("stroke", "#a21942")
                                .transition()
                                .delay(2000)
                                .attr("stroke-opacity", 0.5);
            
            var primAvgLine = canvas
                                .append("line")
                                .attr("class", "textboxNo")
                                .attr('id', 'primTextLine')
                                .attr('x1', width/2 - parseFloat(mapX1(8.39))/2 + 20)
                                .attr('y1',  height - 40 - 30 + 40 - 20 - 80)
                                .attr('x2', width/2 - parseFloat(mapX1(8.39))/2 + 20)
                                .attr('y2', height - 40 - 30 + 40 + 20 - 80)
                                .attr("stroke-width", 3)
                                .attr("stroke-opacity", 0)
                                .attr("stroke", "#a21942")
                                .transition()
                                .delay(2000)
                                .attr("stroke-opacity", 0.5);
            
            var primAvgText = canvas
                            .append("text")
                            .attr("class", "textboxNo")
                            .attr('id', 'primText2')
                            .attr('x', width/2 - parseFloat(mapX1(8.39))/2 + 20 + 5)
                            .attr('y', height - 40 - 30 + 40 + 20 - 80)
                            .html("AFR. AVG.: 8%")
                            .attr('fill', '#a21942')
                            .attr("font-family", "'Roboto', sans-serif")
                            .attr("font-weight", "700")
                            .attr("font-size", "12")
                            .attr("opacity", 0)
                            .transition()
                            .delay(2000)
                            .attr("opacity", 1);
                                
                                
            var primAvgLine = canvas
                                .append("line")
                                .attr("class", "textboxNo")
                                .attr('id', 'primTextLine')
                                .attr('x1', width/2 + parseFloat(mapX1(8.39))/2 - 20)
                                .attr('y1',  height - 40 - 30 + 40 - 20 - 80)
                                .attr('x2', width/2 + parseFloat(mapX1(8.39))/2 - 20)
                                .attr('y2', height - 40 - 30 + 40 + 20 - 80)
                                .attr("stroke-width", 3)
                                .attr("stroke-opacity", 0)
                                .attr("stroke", "#a21942")
                                .transition()
                                .delay(2000)
                                .attr("stroke-opacity", 0.5);
                                                
            d3.csv("quantData2.csv", function(error, data) {
                if (error) throw error;
                
              var funnelGroup5 = canvas.selectAll('.funnelGroup5')
                                        .data(data)
                                        .enter()
                                        .append('g'); 
                                        
                                       
                    
                    var prim1 = funnelGroup5
                                    .append("circle")
                                    .attr("class", "funnelGroup5")
                                    .attr('cx', function(d, i) { return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20;})
                                    .attr('cy', height/2)
                                    .attr('r', 6)
                                    .attr('fill', '#00689d')
                                    .attr('fill-opacity', 0.3)
                                    .transition()
                                    .duration(1500)
                                    .attr('cy', height - 40 - 30)
                                    .attr('cx', function(d, i) { return width/2 + parseFloat(mapX3(d['enrolTertiary']))/2 - 20;});
                                    
                    
                    var prim2 = funnelGroup5
                                    .append("circle")
                                    .attr("class", "funnelGroup5")
                                    .attr('cx', function(d, i) { return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20;})
                                    .attr('cy', height/2)
                                    .attr('r', 6)
                                    .attr('fill', '#00689d')
                                    .attr('fill-opacity', 0.3)
                                    .transition()
                                    .duration(1500)
                                    .attr('cy', height - 40 - 30)
                                    .attr('cx', function(d, i) { return width/2 - parseFloat(mapX3(d['enrolTertiary']))/2 + 20;});
                                    
                                    
                    
                    d3.selectAll(".funnelGroup5").on("mouseover", function(d) 
                                    {
                                    d3.select(this).selectAll("circle").style("stroke", 'rgb(180, 180, 180)').style("stroke-width", "2.5").style("fill-opacity", "1"); // d3.select(this).selectAll("#funnelLine").style("stroke-width", "2");
                                    d3.select(this).selectAll("line").style("stroke-width", "2.5").style("stroke-opacity", "1"); 
                                    d3.select(this).selectAll("rect").style("fill-opacity", "1"); 
                                    div.transition()		
                                        .duration(200)		
                                        .style("opacity", .9);
                                    
                                    var primColor, secColor, terColor;
                                    if(d['enrolPrimary'] >= 91.97){primColor = 'green';}else{ primColor = 'red'};
                                    if(d['enrolSecondary'] >= d['enrolSecondaryAvg']){secColor = 'green';}else{ secColor = 'red'};
                                    if(d['enrolTertiary'] >= 8.39){terColor = 'green';}else{ terColor = 'red'};
                                        
                                    div.html("<span style='font-size: 15px; text-align: left; text-transform: uppercase'>" + "<b>" + d['country'] + "</b> </span> <br>" 
                                                         // + "</span>" + "<br>" + "<span> <br> Primary:   </span>"+  "<b>"+ "<span style = 'color: " + primColor + "'>"  + d['enrolPrimary'] + "%" +  " </span> </b>"
                                                          + "<br>" + " Primary:  <b>" + "<span style='color: " + primColor + "'>" + d['enrolPrimary'] + "%" + "</span> </b>" 
                                                          + "<br>" + " Secondary:  <b>" + "<span style='color: " + secColor + "'>" + d['enrolSecondary'] + "%" + "</span> </b>"
                                                           + "<br>" + " Tertiary: <b>" + "<span style='color: " + terColor + "'>" + d['enrolTertiary'] + "%" + "</span> </b>"
                                                            + "<br> <br>" + "<span style='color: green; font-size: 80%; text-transform: none;' >green</span><span style='font-size: 80%; text-transform: none';>: greater than Afr. avg.</span></b>"
                                                          + "<br>" + "<span style='color: red; font-size: 80%; text-transform: none;'>red</span><span style='font-size: 80%; text-transform: none';>: less than Afr. avg.</span></b>")	
                                        .style("left", (d3.event.pageX - 80) + "px")		
                                        .style("top", (d3.event.pageY + 30) + "px");
                                    })
                                .on("mouseout", function() {
                                    d3.select(this).selectAll("circle").style("stroke", 'white').style("stroke-width", "0").style("fill-opacity", "0.3");
                                    //d3.select(this).selectAll("#funnelLine").style("stroke-width", "0.3").style("stroke-opacity", "0").style("stroke", "yellow");
                                    d3.select(this).selectAll("line").style("stroke-width", "0.3").style("stroke-opacity", "0.5").style("stroke", "yellow");
                                    d3.select(this).selectAll("rect").style("fill-opacity", "0");
                                    
                                    
                                    div.transition()		
                                        .duration(500)		
                                        .style("opacity", 0);	
                                });
                                    
            });
            
    }
    
            function begin4(){
                d3.selectAll(".funnelGroupWest").remove();
                d3.selectAll(".funnelGroupNorth").remove();
                d3.selectAll(".funnelGroupSouth").remove();
                d3.selectAll(".funnelGroupEast").remove();
                d3.selectAll(".funnelGroupCenter").remove();
                d3.selectAll(".textbox").remove();
                d3.selectAll(".textboxNo").remove();
                d3.selectAll(".funnelGroup2").remove();
                d3.selectAll(".funnelGroup3").remove();
                d3.selectAll(".funnelGroup4").remove();
                d3.selectAll(".funnelGroup5").remove();
                
                firstVisual();
                
            }
            
            function visualChange(data, clr, clas){ 
                
                
                // d3.selectAll(".funnelGroupWest").remove();
                // d3.selectAll(".funnelGroupNorth").remove();
                // d3.selectAll(".funnelGroupSouth").remove();
                // d3.selectAll(".funnelGroupEast").remove();
                // d3.selectAll(".funnelGroupCenter").remove();
                d3.selectAll(".textbox").remove();
                d3.selectAll(".textboxNo").remove();
                d3.selectAll(".funnelGroup2").remove();
                d3.selectAll(".funnelGroup3").remove();
                d3.selectAll(".funnelGroup4").remove();
                d3.selectAll(".funnelGroup5").remove();
                d3.selectAll(".funnelGroup").remove();
            
                var funnelGroup = canvas.selectAll('.'+clas)
                                    .data(data)
                                    .enter()
                                    .append('g'); 
            
            var a = function(d, i) { return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20;};
            console.log(" a = " + a);
            var b = function(d, i) { return (width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20 - width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20);};
            console.log(" b = " + b);
            var c =  a - b;
            console.log(" c = " + c);
            
                var primary1 = funnelGroup
                                .append("circle")
                                .attr("class", clas)
                                .attr('cx', function(d, i) { return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20;})
                                .attr('cy', 20 + 50)
                                .attr('r', 6)
                                .attr('fill', clr)
                                .attr('fill-opacity', 0.5);
                var primary2 = funnelGroup
                                .append("circle")
                                .attr("class", clas)
                                .attr('cx', function(d, i) { return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20;})
                                .attr('cy', 20 + 50)
                                .attr('r', 6)
                                .attr('fill', clr)
                                .attr('fill-opacity', 0.5);
                                
                var check = funnelGroup
                                .append("rect")
                                .attr("class", clas)
                                .attr('x', function(d, i) { return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20 ;})
                                .attr('y', 18.75 + 50)
                                .attr('width', function(d, i) { return (width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20 - (width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20));})
                                .attr('height', 2.5)
                                .style("fill", clr)
                                .attr('fill-opacity', 0)
                                ;
        
            
                var secondary1 = funnelGroup
                                .append("circle")
                                .attr("class", clas)
                                .attr('cx', function(d, i) { if(d['enrolSecondary'] !== ""){return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20;}})
                                .attr('cy', function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                                .attr('r', 6)
                                .attr('fill', clr)
                                .attr('fill-opacity', 0.5); 
                var secondary2 = funnelGroup
                                .append("circle")
                                .attr("class", clas)
                                .attr('cx', function(d, i) { if(d['enrolSecondary'] !== ""){return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20;}})
                                .attr('cy', function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                                .attr('r', 6)
                                .attr('fill', clr)
                                .attr('fill-opacity', 0.5);                 
            
                var primSec1 = funnelGroup
                                .append("line")
                                .attr("class", clas)
                                .attr("x1", function(d, i) { if(d['enrolSecondary'] !== ""){return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20; }})
                                .attr("y1", function(d, i) { if(d['enrolSecondary'] !== ""){return 20 + 50;}else{return 10000;}})
                                .attr("x2", function(d, i) { if(d['enrolSecondary'] !== ""){return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20;}})
                                .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                                .attr("stroke-width", 2)
                                .attr("stroke-opacity", 0.2)
                                .attr("stroke", clr);
                                
                var primSec2 = funnelGroup
                                .append("line")
                                .attr("class", clas)
                                .attr("x1", function(d, i) { if(d['enrolSecondary'] !== ""){return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20; }})
                                .attr("y1", function(d, i) { if(d['enrolSecondary'] !== ""){return 20 + 50;}else{return 10000;}})
                                .attr("x2", function(d, i) { if(d['enrolSecondary'] !== ""){return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20;}})
                                .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}} )
                                .attr("stroke-width", 2)
                                .attr("stroke-opacity", 0.2)
                                .attr("stroke", clr)
                                ;
                                
                var tertiary1 = funnelGroup
                                .append("circle")
                                .attr("class", clas)
                                .attr('cx', function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX3(d['enrolTertiary']))/2 - 20;}})
                                .attr('cy', function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40 - 30;}else{return 10000;}})
                                .attr('r', 6)
                                .attr('fill', clr)
                                .attr('fill-opacity', 0.5);
                var tertiary2 = funnelGroup
                                .append("circle")
                                .attr("class", clas)
                                .attr('cx', function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 - parseFloat(mapX3(d['enrolTertiary']))/2 + 20;}})
                                .attr('cy', function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40 - 30;}else{return 10000;}})
                                .attr('r', 6)
                                .attr('fill', clr)
                                .attr('fill-opacity', 0.5);                
                                
                                
                var secTer1 = funnelGroup
                                .append("line")
                                .attr("class", clas)
                                .attr("x1", function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20; }})
                                .attr("y1", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                                .attr("x2", function(d, i) {  if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX3(d['enrolTertiary']))/2 - 20;}} )
                                .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40 - 30;}else{return 10000;}})
                                .attr("stroke-width", 2)
                                .attr("stroke-opacity", 0.2)
                                .attr("stroke", clr)
                                ;
                                
                var secTer2 = funnelGroup
                                .append("line")
                                .attr("class", clas)
                                .attr("x1", function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20; }})
                                .attr("y1", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                                .attr("x2", function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 - parseFloat(mapX3(d['enrolTertiary']))/2 + 20;} })
                                .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40 - 30;}else{return 10000;}})
                                .attr("stroke-width", 2)
                                .attr("stroke-opacity", 0.2)
                                .attr("stroke", clr)
                                ;
                                
                var tooltip =  funnelGroup
                                 .on("click", function(d) { 
                                        
                                $("#graph1").empty();
                                $("#graph2").empty();
                                $("#graph3").empty();
                                $("#graph4").empty();
                                // $("#graph5").empty();
  
                                var ttwidth = width - 100;
                                var graphWidth = ttwidth/4;
                                                    
                                d3.select("#country")
                                        .attr("x", (ttwidth)/2)
                                        .attr("y", 5)
                                        .text(d['country'] + ": change over time");
                                        
                                var mapygraph1 = d3.scaleLinear().domain([0, 100]).range([7*(graphWidth/8), graphWidth/8]);
                                var mapygraph2 = d3.scaleLinear().domain([0, 100]).range([7*(graphWidth/8), graphWidth/8]);   
                                var mapygrpah3 = d3.scaleLinear().domain([0, 100]).range([7*(graphWidth/8), graphWidth/8]); 
                                var mapygraph4 = d3.scaleLinear().domain([25, 75]).range([7*(graphWidth/8), graphWidth/8]);
                                
                                for(var i = 1; i<=4; i++)
                                {
                                    var id = "#graph" + i;
                                    
                                d3.select(id)
                                        .attr("width", graphWidth)
                                        .attr("height", graphWidth);
                                
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8)
                                        .attr("y1", graphWidth/8)
                                        .attr("x2", (graphWidth/8)*7)
                                        .attr("y2", graphWidth/8)
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8 )
                                        .attr("y1", graphWidth/8 + 2*(graphWidth/8))
                                        .attr("x2", (graphWidth/8)*7)
                                        .attr("y2", graphWidth/8 + 2*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8)
                                        .attr("y1", graphWidth/8 + 4*(graphWidth/8))
                                        .attr("x2", (graphWidth/8)*7)
                                        .attr("y2", graphWidth/8 + 4*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8)
                                        .attr("y1", graphWidth/8 + 6*(graphWidth/8))
                                        .attr("x2", (graphWidth/8)*7)
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);    
                                       
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8)
                                        .attr("y1", graphWidth/8)
                                        .attr("x2", graphWidth/8)
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8 + 2*(graphWidth/8))
                                        .attr("y1", graphWidth/8 )
                                        .attr("x2", (graphWidth/8) + 2*(graphWidth/8))
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8 + 4*(graphWidth/8))
                                        .attr("y1", graphWidth/8)
                                        .attr("x2", graphWidth/8 + 4*(graphWidth/8))
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8 + 6*(graphWidth/8))
                                        .attr("y1", graphWidth/8)
                                        .attr("x2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);  
                                
                                d3.select(id)
                                        .append("text")
                                        .attr("class", "label")
                                        .attr("x", graphWidth/8)
                                        .attr("y", 7*(graphWidth/8) + 15)
                                        .text("'90-'95")
                                        .attr("text-anchor", "middle");
                                d3.select(id)
                                        .append("text")
                                        .attr("class", "label")
                                        .attr("x", 7*(graphWidth/8))
                                        .attr("y", 7*(graphWidth/8) + 15)
                                        .text("'06-'10")
                                        .attr("text-anchor", "middle");                                
                                        
                                }
                                
                                    
                                d3.select("#graph1")
                                        .append("text")
                                        .attr("class", "graphTitle")
                                        .attr("x", graphWidth/2)
                                        .attr("y", 20)
                                        .text("primary enrollment rate")
                                        .attr("text-anchor", "middle");
                                
                                d3.select("#graph2")
                                        .append("text")
                                        .attr("class", "graphTitle")
                                        .attr("x", graphWidth/2)
                                        .attr("y", 20)
                                        .text("secondary enrollment rate")
                                        .attr("text-anchor", "middle");
                                d3.select("#graph3")
                                        .append("text")
                                        .attr("class", "graphTitle")
                                        .attr("x", graphWidth/2)
                                        .attr("y", 20)
                                        .text("tertiary enrollment rate")
                                        .attr("text-anchor", "middle"); 
                                d3.select("#graph4")
                                        .append("text")
                                        .attr("class", "graphTitle")
                                        .attr("x", graphWidth/2)
                                        .attr("y", 20)
                                        .text("inequality (GINI)")
                                        .attr("text-anchor", "middle"); 
                                // d3.select("#graph5")
                                //         .append("text")
                                //         .attr("class", "graphTitle")
                                //         .attr("x", graphWidth/2)
                                //         .attr("y", 20)
                                //         .text("poverty")
                                //         .attr("text-anchor", "middle"); 
                        
                        if(d['pri9195'] == "" && d['pri0610'] == ""){
                            
                            d3.select("#graph1")
                                        .append("text")
                                        .attr("class", "nodata")
                                        .text("No Data")
                                        .attr('x', graphWidth/2)
                                        .attr('y', graphWidth/2 + 5)
                                        .style("fill", "LightGrey")
                                        .attr("text-anchor", "middle");    
                        }
                        
                        if(d['sec9195'] == "" && d['sec0610'] == ""){
                             d3.select("#graph2")
                                        .append("text")
                                        .attr("class", "nodata")
                                        .text("No Data")
                                        .attr('x', graphWidth/2)
                                        .attr('y', graphWidth/2 + 5)
                                        .style("fill", "LightGrey")
                                        .attr("text-anchor", "middle");   
                        }
                        
                        if(d['ter9195'] == "" && d['ter0610'] == ""){
                             d3.select("#graph3")
                                        .append("text")
                                        .attr("class", "nodata")
                                        .text("No Data")
                                        .attr('x', graphWidth/2)
                                        .attr('y', graphWidth/2 + 5)
                                        .style("fill", "LightGrey")
                                        .attr("text-anchor", "middle");   
                        }
                        
                        if(d['gini9195'] == "" && d['gini0610'] == ""){
                             d3.select("#graph4")
                                        .append("text")
                                        .attr("class", "nodata")
                                        .text("No Data")
                                        .attr('x', graphWidth/2)
                                        .attr('y', graphWidth/2 + 5)
                                        .style("fill", "LightGrey")
                                        .attr("text-anchor", "middle");   
                        }
                        
                        if(d['pri9195'] !== "" && d['pri0610'] !== ""){  
                       
                        var line1 = d3.select("#graph1")
                                    .append("line")
                                    .attr("x1", graphWidth/8)
                                    .attr("y1", mapygraph1(d['pri9195']))
                                    .attr("x2", 7*(graphWidth/8))
                                    .attr("y2", mapygraph1(d['pri0610']))
                                    .attr('stroke', '#27bde2')
                                    .attr('stroke-width', 2);
                        }
                        
                        if(d['pri9195'] !== ""){
                        var circle1a = d3.select("#graph1")
                                        .append("circle")
                                        .attr("cx", graphWidth/8)
                                        .attr('cy', mapygraph1(d['pri9195']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text1a = d3.select("#graph1")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['pri9195'] + "%")
                                        .attr('x', graphWidth/8 - 15)
                                        .attr('y', mapygraph1(d['pri9195']) - 15);
                                        
                        }
                        
                        if(d['pri0610'] !== ""){
                        var circle1b = d3.select("#graph1")
                                        .append("circle")
                                        .attr("cx", 7*(graphWidth/8))
                                        .attr('cy', mapygraph1(d['pri0610']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                                        
                        var text1b = d3.select("#graph1")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['pri0610'] + "%")
                                        .attr('x', 7*(graphWidth/8) - 15)
                                        .attr('y', mapygraph1(d['pri0610']) - 15);
                                        
                        }            
                        
                        if(d['sec9195'] !== "" && d['sec0610'] !== ""){
                        var line2 = d3.select("#graph2")
                                    .append("line")
                                    .attr("x1", graphWidth/8)
                                    .attr("y1", mapygraph1(d['sec9195']))
                                    .attr("x2", 7*(graphWidth/8))
                                    .attr("y2", mapygraph1(d['sec0610']))
                                    .attr('stroke', '#27bde2')
                                    .attr('stroke-width', 2);            
                        }
                        
                        if(d['sec9195'] !== ""){
                        var circle2a = d3.select("#graph2")
                                        .append("circle")
                                        .attr("cx", graphWidth/8)
                                        .attr('cy', mapygraph1(d['sec9195']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text2a = d3.select("#graph2")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['sec9195'] + "%")
                                        .attr('x', (graphWidth/8) - 15)
                                        .attr('y', mapygraph1(d['sec9195']) - 15);                
                                        
                        }
                        
                        if(d['sec0610'] !== ""){
                        var circle2b = d3.select("#graph2")
                                        .append("circle")
                                        .attr("cx", 7*(graphWidth/8))
                                        .attr('cy', mapygraph1(d['sec0610']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text2b = d3.select("#graph2")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['sec0610'] + "%")
                                        .attr('x', 7*(graphWidth/8) - 15)
                                        .attr('y', mapygraph2(d['sec0610']) - 15);                   
                        }
                        
                        if(d['ter9195'] !== "" && d['ter0610'] !== ""){
                        var line3 = d3.select("#graph3")
                                    .append("line")
                                    .attr("x1", graphWidth/8)
                                    .attr("y1", mapygraph1(d['ter9195']))
                                    .attr("x2", 7*(graphWidth/8))
                                    .attr("y2", mapygraph1(d['ter0610']))
                                    .attr('stroke', '#27bde2')
                                    .attr('stroke-width', 2);
                        }
                        
                        if(d['ter9195'] !== ""){
                        var circle3a = d3.select("#graph3")
                                        .append("circle")
                                        .attr("cx", graphWidth/8)
                                        .attr('cy', mapygraph1(d['ter9195']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text3a = d3.select("#graph3")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['ter9195'] + "%")
                                        .attr('x', (graphWidth/8) - 15)
                                        .attr('y', mapygraph1(d['ter9195']) - 15);                     
                        
                                        
                        }
                        if(d['ter0610'] != ""){
                        var circle3b = d3.select("#graph3")
                                        .append("circle")
                                        .attr("cx", 7*(graphWidth/8))
                                        .attr('cy', mapygraph1(d['ter0610']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                         
                        var text3b = d3.select("#graph3")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['ter0610'] + "%")
                                        .attr('x', 7*(graphWidth/8) - 15)
                                        .attr('y', mapygraph1(d['ter0610']) - 15);                     
                        
                                        
                        }                
                                    
                        if(d['gini9195'] !== "" && d['gini0610'] !== ""){
                        var line3 = d3.select("#graph4")
                                    .append("line")
                                    .attr("x1", graphWidth/8)
                                    .attr("y1", mapygraph4(d['gini9195']))
                                    .attr("x2", 7*(graphWidth/8))
                                    .attr("y2", mapygraph4(d['gini0610']))
                                    .attr('stroke', '#fcc30b')
                                    .attr('stroke-width', 2);
                        }
                        
                        if(d['gini9195'] !== ""){
                        var circle4a = d3.select("#graph4")
                                        .append("circle")
                                        .attr("cx", graphWidth/8)
                                        .attr('cy', mapygraph4(d['gini9195']))
                                        .attr('r', 5)
                                        .attr('fill', '#fcc30b')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text4a = d3.select("#graph4")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['gini9195'] + "%")
                                        .attr('x', (graphWidth/8) - 15)
                                        .attr('y', mapygraph4(d['gini9195']) - 15);                   
                                        
                        }
                          
                        if(d['gini0610'] !== ""){                
                        var circle4b = d3.select("#graph4")
                                        .append("circle")
                                        .attr("cx", 7*(graphWidth/8))
                                        .attr('cy', mapygraph4(d['gini0610']))
                                        .attr('r', 5)
                                        .attr('fill', '#fcc30b')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2); 
                        var text4b = d3.select("#graph4")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['gini0610'] + "%")
                                        .attr('x', 7*(graphWidth/8) - 15)
                                        .attr('y', mapygraph4(d['gini0610']) - 15);
                                        
                                        
                        }        
                                $(".btn.close").on("click",function(){
			                    	$("#myModal").fadeOut();
			                    	$('.overlay').hide();
			                            })
                                        
                                $('body').append('<div class="overlay"></div>');
                                $('.overlay').show();
                                $("#myModal").fadeIn();
                                d3.selectAll(id).style('display', 'hidden');})
                                     
 
                                // .on("mouseclick", function(){ alert(" HI "); })
                                .on("mouseover", function(d) 
                                    {
                                    d3.select(this).selectAll("circle").style("stroke", 'black').style("stroke-width", "2.5").style("fill-opacity", "1"); // d3.select(this).selectAll("#funnelLine").style("stroke-width", "2");
                                    d3.select(this).selectAll("line").style("stroke-width", "2.5").style("stroke-opacity", "1"); 
                                    d3.select(this).selectAll("rect").style("fill-opacity", "1"); 
                                    div.transition()		
                                        .duration(200)		
                                        .style("opacity", 1);
                                    
                                    var primColor, secColor, terColor;
                                    if(d['enrolPrimary'] >= 91.97){primColor = 'green';}else{ primColor = 'red'};
                                    if(d['enrolSecondary'] >= d['enrolSecondaryAvg']){secColor = 'green';}else{ secColor = 'red'};
                                    if(d['enrolTertiary'] >= 8.39){terColor = 'green';}else{ terColor = 'red'};
                                        
                                    div.html("<span style='font-size: 15px; text-align: left; text-transform: uppercase'>" + "<b>" + d['country'] + "</b> </span> <br>" 
                                                         // + "</span>" + "<br>" + "<span> <br> Primary:   </span>"+  "<b>"+ "<span style = 'color: " + primColor + "'>"  + d['enrolPrimary'] + "%" +  " </span> </b>"
                                                          + "<br>" + " Primary:  <b>" + "<span style='color: " + primColor + "'>" + d['enrolPrimary'] + "%" + "</span> </b>"
                                                          + "<br>" + " Secondary:  <b>" + "<span style='color: " + secColor + "'>" + d['enrolSecondary'] + "%" + "</span> </b>"
                                                          + "<br>" + " Tertiary: <b>" + "<span style='color: " + terColor + "'>" + d['enrolTertiary'] + "%" + "</span> </b>"
                                                           + "<br> <br>" + "<span style='color: green; font-size: 80%; text-transform: none;' >green</span><span style='font-size: 80%; text-transform: none';>: greater than Afr. avg.</span></b>"
                                                          + "<br>" + "<span style='color: red; font-size: 80%; text-transform: none;'>red</span><span style='font-size: 80%; text-transform: none';>: less than Afr. avg.</span></b>")	
                                        .style("left", (d3.event.pageX - 80) + "px")		
                                        .style("top", (d3.event.pageY - 170) + "px");
                                    })
                                .on("mouseout", function() {
                                    d3.select(this).selectAll("circle").style("stroke", 'white').style("stroke-width", "0").style("fill-opacity", "0.5");
                                    //d3.select(this).selectAll("#funnelLine").style("stroke-width", "0.3").style("stroke-opacity", "0").style("stroke", clr);
                                    d3.select(this).selectAll("line").style("stroke-width", "2").style("stroke-opacity", "0.2").style("stroke", clr);
                                    d3.select(this).selectAll("rect").style("fill-opacity", "0");
                                    
                                    
                                    div.transition()		
                                        .duration(500)		
                                        .style("opacity", 0);	
                                });
                                    
                
            }
             
            function changeVisual(data){ 
                
                d3.selectAll(".funnelGroup").remove();
            
                var funnelGroup = canvas.selectAll('.funnelGroup')
                                    .data(data)
                                    .enter()
                                    .append('g'); 
            
            var a = function(d, i) { return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20;};
            console.log(" a = " + a);
            var b = function(d, i) { return (width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20 - width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20);};
            console.log(" b = " + b);
            var c =  a - b;
            console.log(" c = " + c);
            
                var primary1 = funnelGroup
                                .append("circle")
                                .attr("class", "funnelGroup")
                                .attr('cx', function(d, i) { return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20;})
                                .attr('cy', 20)
                                .attr('r', 6)
                                .attr('fill', 'yellow')
                                .attr('fill-opacity', 0.3);
                var primary2 = funnelGroup
                                .append("circle")
                                .attr("class", "funnelGroup")
                                .attr('cx', function(d, i) { return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20;})
                                .attr('cy', 20)
                                .attr('r', 6)
                                .attr('fill', 'yellow')
                                .attr('fill-opacity', 0.3);
                                
                var check = funnelGroup
                                .append("rect")
                                .attr("class", "funnelGroup")
                                .attr('x', function(d, i) { return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20;})
                                .attr('y', 18.75)
                                .attr('width', function(d, i) { return (width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20 - (width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20));})
                                .attr('height', 2.5)
                                .style("fill", "yellow")
                                .attr('fill-opacity', 0)
                                ;
        
            
                var secondary1 = funnelGroup
                                .append("circle")
                                .attr("class", "funnelGroup")
                                .attr('cx', function(d, i) { if(d['enrolSecondary'] !== ""){return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20;}})
                                .attr('cy', function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                                .attr('r', 6)
                                .attr('fill', 'yellow')
                                .attr('fill-opacity', 0.3); 
                var secondary2 = funnelGroup
                                .append("circle")
                                .attr("class", "funnelGroup")
                                .attr('cx', function(d, i) { if(d['enrolSecondary'] !== ""){return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20;}})
                                .attr('cy', function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                                .attr('r', 6)
                                .attr('fill', 'yellow')
                                .attr('fill-opacity', 0.3);                 
            
                var primSec1 = funnelGroup
                                .append("line")
                                .attr("class", "funnelGroup")
                                .attr("x1", function(d, i) { if(d['enrolSecondary'] !== ""){return width/2 + parseFloat(mapX1(d['enrolPrimary']))/2 - 20; }})
                                .attr("y1", function(d, i) { if(d['enrolSecondary'] !== ""){return 20;}else{return 10000;}})
                                .attr("x2", function(d, i) { if(d['enrolSecondary'] !== ""){return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20;}})
                                .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}})
                                .attr("stroke-width", 2)
                                .attr("stroke-opacity", 0.2)
                                .attr("stroke", "yellow");
                                
                var primSec2 = funnelGroup
                                .append("line")
                                .attr("class", "funnelGroup")
                                .attr("x1", function(d, i) { if(d['enrolSecondary'] !== ""){return width/2 - parseFloat(mapX1(d['enrolPrimary']))/2 + 20; }})
                                .attr("y1", function(d, i) { if(d['enrolSecondary'] !== ""){return 20;}else{return 10000;}})
                                .attr("x2", function(d, i) { if(d['enrolSecondary'] !== ""){return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20;}})
                                .attr("y2", function(d, i) { if(d['enrolSecondary'] !== ""){return height/2;}else{return 10000;}} )
                                .attr("stroke-width", 2)
                                .attr("stroke-opacity", 0.2)
                                .attr("stroke", "yellow")
                                ;
                                
                var tertiary1 = funnelGroup
                                .append("circle")
                                .attr("class", "funnelGroup")
                                .attr('cx', function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX3(d['enrolTertiary']))/2 - 20;}})
                                .attr('cy', function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40;}else{return 10000;}})
                                .attr('r', 6)
                                .attr('fill', 'yellow')
                                .attr('fill-opacity', 0.3);
                var tertiary2 = funnelGroup
                                .append("circle")
                                .attr("class", "funnelGroup")
                                .attr('cx', function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 - parseFloat(mapX3(d['enrolTertiary']))/2 + 20;}})
                                .attr('cy', function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40;}else{return 10000;}})
                                .attr('r', 6)
                                .attr('fill', 'yellow')
                                .attr('fill-opacity', 0.3);                
                                
                                
                var secTer1 = funnelGroup
                                .append("line")
                                .attr("class", "funnelGroup")
                                .attr("x1", function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX2(d['enrolSecondary']))/2 - 20; }})
                                .attr("y1", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                                .attr("x2", function(d, i) {  if(d['enrolTertiary'] !== ""){return width/2 + parseFloat(mapX3(d['enrolTertiary']))/2 - 20;}} )
                                .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40;}else{return 10000;}})
                                .attr("stroke-width", 2)
                                .attr("stroke-opacity", 0.2)
                                .attr("stroke", "yellow")
                                ;
                                
                var secTer2 = funnelGroup
                                .append("line")
                                .attr("class", "funnelGroup")
                                .attr("x1", function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 - parseFloat(mapX2(d['enrolSecondary']))/2 + 20; }})
                                .attr("y1", function(d, i) { if(d['enrolTertiary'] !== ""){return height/2;}else{return 10000;}})
                                .attr("x2", function(d, i) { if(d['enrolTertiary'] !== ""){return width/2 - parseFloat(mapX3(d['enrolTertiary']))/2 + 20;} })
                                .attr("y2", function(d, i) { if(d['enrolTertiary'] !== ""){return height - 40;}else{return 10000;}})
                                .attr("stroke-width", 2)
                                .attr("stroke-opacity", 0.2)
                                .attr("stroke", "yellow")
                                ;
                                
                var tooltip =  funnelGroup
                                 .on("click", function(d) { 
                                        
                                $("#graph1").empty();
                                $("#graph2").empty();
                                $("#graph3").empty();
                                $("#graph4").empty();
                                // $("#graph5").empty();
  
                                var ttwidth = width - 100;
                                var graphWidth = ttwidth/4;
                                                    
                                d3.select("#country")
                                        .attr("x", (ttwidth)/2)
                                        .attr("y", 5)
                                        .text(d['country'] + ": change over time");
                                        
                                var mapygraph1 = d3.scaleLinear().domain([0, 100]).range([7*(graphWidth/8), graphWidth/8]);
                                var mapygraph2 = d3.scaleLinear().domain([0, 100]).range([7*(graphWidth/8), graphWidth/8]);   
                                var mapygrpah3 = d3.scaleLinear().domain([0, 100]).range([7*(graphWidth/8), graphWidth/8]); 
                                var mapygraph4 = d3.scaleLinear().domain([25, 75]).range([7*(graphWidth/8), graphWidth/8]);
                                
                                for(var i = 1; i<=4; i++)
                                {
                                    var id = "#graph" + i;
                                    
                                d3.select(id)
                                        .attr("width", graphWidth)
                                        .attr("height", graphWidth);
                                
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8)
                                        .attr("y1", graphWidth/8)
                                        .attr("x2", (graphWidth/8)*7)
                                        .attr("y2", graphWidth/8)
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8 )
                                        .attr("y1", graphWidth/8 + 2*(graphWidth/8))
                                        .attr("x2", (graphWidth/8)*7)
                                        .attr("y2", graphWidth/8 + 2*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8)
                                        .attr("y1", graphWidth/8 + 4*(graphWidth/8))
                                        .attr("x2", (graphWidth/8)*7)
                                        .attr("y2", graphWidth/8 + 4*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8)
                                        .attr("y1", graphWidth/8 + 6*(graphWidth/8))
                                        .attr("x2", (graphWidth/8)*7)
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);    
                                       
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8)
                                        .attr("y1", graphWidth/8)
                                        .attr("x2", graphWidth/8)
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8 + 2*(graphWidth/8))
                                        .attr("y1", graphWidth/8 )
                                        .attr("x2", (graphWidth/8) + 2*(graphWidth/8))
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8 + 4*(graphWidth/8))
                                        .attr("y1", graphWidth/8)
                                        .attr("x2", graphWidth/8 + 4*(graphWidth/8))
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);
                                d3.select(id)
                                        .append("line")
                                        .attr("x1", graphWidth/8 + 6*(graphWidth/8))
                                        .attr("y1", graphWidth/8)
                                        .attr("x2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr("y2", graphWidth/8 + 6*(graphWidth/8))
                                        .attr('stroke', '#eaeaea')
                                        .attr('stroke-width', 2);  
                                
                                d3.select(id)
                                        .append("text")
                                        .attr("class", "label")
                                        .attr("x", graphWidth/8)
                                        .attr("y", 7*(graphWidth/8) + 15)
                                        .text("'90-'95")
                                        .attr("text-anchor", "middle");
                                d3.select(id)
                                        .append("text")
                                        .attr("class", "label")
                                        .attr("x", 7*(graphWidth/8))
                                        .attr("y", 7*(graphWidth/8) + 15)
                                        .text("'06-'10")
                                        .attr("text-anchor", "middle");                                
                                        
                                }
                                
                                    
                                d3.select("#graph1")
                                        .append("text")
                                        .attr("class", "graphTitle")
                                        .attr("x", graphWidth/2)
                                        .attr("y", 20)
                                        .text("primary enrollment rate")
                                        .attr("text-anchor", "middle");
                                
                                d3.select("#graph2")
                                        .append("text")
                                        .attr("class", "graphTitle")
                                        .attr("x", graphWidth/2)
                                        .attr("y", 20)
                                        .text("secondary enrollment rate")
                                        .attr("text-anchor", "middle");
                                d3.select("#graph3")
                                        .append("text")
                                        .attr("class", "graphTitle")
                                        .attr("x", graphWidth/2)
                                        .attr("y", 20)
                                        .text("tertiary enrollment rate")
                                        .attr("text-anchor", "middle"); 
                                d3.select("#graph4")
                                        .append("text")
                                        .attr("class", "graphTitle")
                                        .attr("x", graphWidth/2)
                                        .attr("y", 20)
                                        .text("inequality (GINI)")
                                        .attr("text-anchor", "middle"); 
                                // d3.select("#graph5")
                                //         .append("text")
                                //         .attr("class", "graphTitle")
                                //         .attr("x", graphWidth/2)
                                //         .attr("y", 20)
                                //         .text("poverty")
                                //         .attr("text-anchor", "middle"); 
                        
                        if(d['pri9195'] == "" && d['pri0610'] == ""){
                            
                            d3.select("#graph1")
                                        .append("text")
                                        .attr("class", "nodata")
                                        .text("No Data")
                                        .attr('x', graphWidth/2)
                                        .attr('y', graphWidth/2 + 5)
                                        .style("fill", "LightGrey")
                                        .attr("text-anchor", "middle");    
                        }
                        
                        if(d['sec9195'] == "" && d['sec0610'] == ""){
                             d3.select("#graph2")
                                        .append("text")
                                        .attr("class", "nodata")
                                        .text("No Data")
                                        .attr('x', graphWidth/2)
                                        .attr('y', graphWidth/2 + 5)
                                        .style("fill", "LightGrey")
                                        .attr("text-anchor", "middle");   
                        }
                        
                        if(d['ter9195'] == "" && d['ter0610'] == ""){
                             d3.select("#graph3")
                                        .append("text")
                                        .attr("class", "nodata")
                                        .text("No Data")
                                        .attr('x', graphWidth/2)
                                        .attr('y', graphWidth/2 + 5)
                                        .style("fill", "LightGrey")
                                        .attr("text-anchor", "middle");   
                        }
                        
                        if(d['gini9195'] == "" && d['gini0610'] == ""){
                             d3.select("#graph4")
                                        .append("text")
                                        .attr("class", "nodata")
                                        .text("No Data")
                                        .attr('x', graphWidth/2)
                                        .attr('y', graphWidth/2 + 5)
                                        .style("fill", "LightGrey")
                                        .attr("text-anchor", "middle");   
                        }
                        
                        if(d['pri9195'] !== "" && d['pri0610'] !== ""){  
                       
                        var line1 = d3.select("#graph1")
                                    .append("line")
                                    .attr("x1", graphWidth/8)
                                    .attr("y1", mapygraph1(d['pri9195']))
                                    .attr("x2", 7*(graphWidth/8))
                                    .attr("y2", mapygraph1(d['pri0610']))
                                    .attr('stroke', '#27bde2')
                                    .attr('stroke-width', 2);
                        }
                        
                        if(d['pri9195'] !== ""){
                        var circle1a = d3.select("#graph1")
                                        .append("circle")
                                        .attr("cx", graphWidth/8)
                                        .attr('cy', mapygraph1(d['pri9195']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text1a = d3.select("#graph1")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['pri9195'] + "%")
                                        .attr('x', graphWidth/8 - 15)
                                        .attr('y', mapygraph1(d['pri9195']) - 15);
                                        
                        }
                        
                        if(d['pri0610'] !== ""){
                        var circle1b = d3.select("#graph1")
                                        .append("circle")
                                        .attr("cx", 7*(graphWidth/8))
                                        .attr('cy', mapygraph1(d['pri0610']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                                        
                        var text1b = d3.select("#graph1")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['pri0610'] + "%")
                                        .attr('x', 7*(graphWidth/8) - 15)
                                        .attr('y', mapygraph1(d['pri0610']) - 15);
                                        
                        }            
                        
                        if(d['sec9195'] !== "" && d['sec0610'] !== ""){
                        var line2 = d3.select("#graph2")
                                    .append("line")
                                    .attr("x1", graphWidth/8)
                                    .attr("y1", mapygraph1(d['sec9195']))
                                    .attr("x2", 7*(graphWidth/8))
                                    .attr("y2", mapygraph1(d['sec0610']))
                                    .attr('stroke', '#27bde2')
                                    .attr('stroke-width', 2);            
                        }
                        
                        if(d['sec9195'] !== ""){
                        var circle2a = d3.select("#graph2")
                                        .append("circle")
                                        .attr("cx", graphWidth/8)
                                        .attr('cy', mapygraph1(d['sec9195']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text2a = d3.select("#graph2")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['sec9195'] + "%")
                                        .attr('x', (graphWidth/8) - 15)
                                        .attr('y', mapygraph1(d['sec9195']) - 15);                
                                        
                        }
                        
                        if(d['sec0610'] !== ""){
                        var circle2b = d3.select("#graph2")
                                        .append("circle")
                                        .attr("cx", 7*(graphWidth/8))
                                        .attr('cy', mapygraph1(d['sec0610']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text2b = d3.select("#graph2")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['sec0610'] + "%")
                                        .attr('x', 7*(graphWidth/8) - 15)
                                        .attr('y', mapygraph2(d['sec0610']) - 15);                   
                        }
                        
                        if(d['ter9195'] !== "" && d['ter0610'] !== ""){
                        var line3 = d3.select("#graph3")
                                    .append("line")
                                    .attr("x1", graphWidth/8)
                                    .attr("y1", mapygraph1(d['ter9195']))
                                    .attr("x2", 7*(graphWidth/8))
                                    .attr("y2", mapygraph1(d['ter0610']))
                                    .attr('stroke', '#27bde2')
                                    .attr('stroke-width', 2);
                        }
                        
                        if(d['ter9195'] !== ""){
                        var circle3a = d3.select("#graph3")
                                        .append("circle")
                                        .attr("cx", graphWidth/8)
                                        .attr('cy', mapygraph1(d['ter9195']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text3a = d3.select("#graph3")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['ter9195'] + "%")
                                        .attr('x', (graphWidth/8) - 15)
                                        .attr('y', mapygraph1(d['ter9195']) - 15);                     
                        
                                        
                        }
                        if(d['ter0610'] != ""){
                        var circle3b = d3.select("#graph3")
                                        .append("circle")
                                        .attr("cx", 7*(graphWidth/8))
                                        .attr('cy', mapygraph1(d['ter0610']))
                                        .attr('r', 5)
                                        .attr('fill', '#27bde2')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                         
                        var text3b = d3.select("#graph3")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['ter0610'] + "%")
                                        .attr('x', 7*(graphWidth/8) - 15)
                                        .attr('y', mapygraph1(d['ter0610']) - 15);                     
                        
                                        
                        }                
                                    
                        if(d['gini9195'] !== "" && d['gini0610'] !== ""){
                        var line3 = d3.select("#graph4")
                                    .append("line")
                                    .attr("x1", graphWidth/8)
                                    .attr("y1", mapygraph4(d['gini9195']))
                                    .attr("x2", 7*(graphWidth/8))
                                    .attr("y2", mapygraph4(d['gini0610']))
                                    .attr('stroke', '#fcc30b')
                                    .attr('stroke-width', 2);
                        }
                        
                        if(d['gini9195'] !== ""){
                        var circle4a = d3.select("#graph4")
                                        .append("circle")
                                        .attr("cx", graphWidth/8)
                                        .attr('cy', mapygraph4(d['gini9195']))
                                        .attr('r', 5)
                                        .attr('fill', '#fcc30b')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2);
                        
                        var text4a = d3.select("#graph4")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['gini9195'] + "%")
                                        .attr('x', (graphWidth/8) - 15)
                                        .attr('y', mapygraph4(d['gini9195']) - 15);                   
                                        
                        }
                          
                        if(d['gini0610'] !== ""){                
                        var circle4b = d3.select("#graph4")
                                        .append("circle")
                                        .attr("cx", 7*(graphWidth/8))
                                        .attr('cy', mapygraph4(d['gini0610']))
                                        .attr('r', 5)
                                        .attr('fill', '#fcc30b')
                                        .attr('stroke', 'white')
                                        .attr('stroke-width', 2); 
                        var text4b = d3.select("#graph4")
                                        .append("text")
                                        .attr('class', 'label2')
                                        .text(d['gini0610'] + "%")
                                        .attr('x', 7*(graphWidth/8) - 15)
                                        .attr('y', mapygraph4(d['gini0610']) - 15);
                                        
                                        
                        }        
                                $(".btn.close").on("click",function(){
			                    	$("#myModal").fadeOut();
			                    	$('.overlay').hide();
			                            })
                                        
                                $('body').append('<div class="overlay"></div>');
                                $('.overlay').show();
                                $("#myModal").fadeIn();
                                d3.selectAll(id).style('display', 'hidden');})
                                     
 
                                // .on("mouseclick", function(){ alert(" HI "); })
                                .on("mouseover", function(d) 
                                    {
                                    d3.select(this).selectAll("circle").style("stroke", 'rgb(180, 180, 180)').style("stroke-width", "2.5").style("fill-opacity", "1"); // d3.select(this).selectAll("#funnelLine").style("stroke-width", "2");
                                    d3.select(this).selectAll("line").style("stroke-width", "2.5").style("stroke-opacity", "1"); 
                                    d3.select(this).selectAll("rect").style("fill-opacity", "1"); 
                                    div.transition()		
                                        .duration(200)		
                                        .style("opacity", .9);
                                    
                                    var primColor, secColor, terColor;
                                    if(d['enrolPrimary'] >= 91.97){primColor = 'green';}else{ primColor = 'red'};
                                    if(d['enrolSecondary'] >= d['enrolSecondaryAvg']){secColor = 'green';}else{ secColor = 'red'};
                                    if(d['enrolTertiary'] >= 8.39){terColor = 'green';}else{ terColor = 'red'};
                                        
                                    div.html("<span style='font-size: 15px; text-align: left; text-transform: uppercase'>" + "<b>" + d['country'] + "</b> </span> <br>" 
                                                         // + "</span>" + "<br>" + "<span> <br> Primary:   </span>"+  "<b>"+ "<span style = 'color: " + primColor + "'>"  + d['enrolPrimary'] + "%" +  " </span> </b>"
                                                          + "<br>" + " Primary:  <b>" + "<span style='color: " + primColor + "'>" + d['enrolPrimary'] + "%" + "</span> </b>"
                                                          + "<br>" + " Secondary:  <b>" + "<span style='color: " + secColor + "'>" + d['enrolSecondary'] + "%" + "</span> </b>"
                                                          + "<br>" + " Tertiary: <b>" + "<span style='color: " + terColor + "'>" + d['enrolTertiary'] + "%" + "</span> </b>"
                                                           + "<br> <br>" + "<span style='color: green; font-size: 80%; text-transform: none;' >green</span><span style='font-size: 80%; text-transform: none';>: greater than Afr. avg.</span></b>"
                                                          + "<br>" + "<span style='color: red; font-size: 80%; text-transform: none;'>red</span><span style='font-size: 80%; text-transform: none';>: less than Afr. avg.</span></b>")	
                                        .style("left", (d3.event.pageX - 80) + "px")		
                                        .style("top", (d3.event.pageY - 170) + "px");
                                    })
                                .on("mouseout", function() {
                                    d3.select(this).selectAll("circle").style("stroke", 'white').style("stroke-width", "0").style("fill-opacity", "0.3");
                                    //d3.select(this).selectAll("#funnelLine").style("stroke-width", "0.3").style("stroke-opacity", "0").style("stroke", "yellow");
                                    d3.select(this).selectAll("line").style("stroke-width", "0.3").style("stroke-opacity", "0.5").style("stroke", "yellow");
                                    d3.select(this).selectAll("rect").style("fill-opacity", "0");
                                    
                                    
                                    div.transition()		
                                        .duration(500)		
                                        .style("opacity", 0);	
                                });
                                    
                
            }
        </script>
    </body>
</html>


<!---->